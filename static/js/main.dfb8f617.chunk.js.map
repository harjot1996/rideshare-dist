{"version":3,"sources":["libs/cognito.ts","contexts/authContext.tsx","hooks/useAuthHooks.tsx","components/authComponents.tsx","routes/auth/signIn.tsx","routes/auth/signUp.tsx","routes/auth/verify.tsx","routes/auth/requestCode.tsx","routes/auth/forgotPassword.tsx","routes/auth/changePassword.tsx","routes/landing.tsx","Context.js","routes/Header.js","routes/Modal.js","routes/AddressPicker.js","routes/RequestRide.js","routes/RideDetail.js","routes/Home.js","App.tsx","index.tsx"],"names":["userPoolId","process","clientId","console","log","poolData","UserPoolId","ClientId","userPool","CognitoUserPool","currentUser","getCurrentUser","getCognitoUser","username","userData","Username","Pool","CognitoUser","getSession","a","Promise","resolve","reject","err","session","catch","signUpUserWithEmail","email","password","attributeList","CognitoUserAttribute","Name","Value","signUp","res","verifyCode","code","confirmRegistration","result","signInWithEmail","authenticationData","Password","authenticationDetails","AuthenticationDetails","authenticateUser","onSuccess","onFailure","getAttributes","getUserAttributes","attributes","setAttribute","attribute","push","updateAttributes","sendCode","cognitoUser","forgotPassword","confirmPassword","changePassword","oldPassword","newPassword","AuthStatus","defaultState","sessionInfo","authStatus","Loading","AuthContext","React","createContext","AuthIsSignedIn","children","useContext","SignedIn","AuthIsNotSignedIn","SignedOut","AuthProvider","useState","setAuthStatus","setSessionInfo","attrInfo","setAttrInfo","useEffect","accessToken","jwtToken","refreshToken","token","window","localStorage","setItem","attr","getSessionInfo","cognito","state","signUpWithEmail","signOut","Provider","value","useValidPassword","initialValue","setPassword","passwordIsValid","setPasswordIsValid","passwordSchema","yup","shape","min","required","length","isValid","isValidSync","useValidUsername","setUsername","usernameIsValid","setUsernameIsValid","usernameSchema","useValidCode","setCode","codeIsValid","setCodeIsValid","codeSchema","Email","emailIsValid","setEmail","TextField","fullWidth","variant","label","error","onChange","evt","target","Code","useStyles","makeStyles","root","height","hover","cursor","SignIn","classes","setError","history","useHistory","authContext","signInClicked","message","passwordResetClicked","Grid","className","container","direction","justify","alignItems","xs","sm","lg","item","Paper","style","width","padding","Box","m","Typography","onClick","mt","color","Button","goBack","disabled","SignUp","setEmailIsValid","emailSchema","useValidEmail","created","setCreated","passwordConfirm","setPasswordConfirm","passwordConfirmIsValid","Error","accountCreated","VerifyCode","sendClicked","text","textAlign","RequestCode","resetSent","setResetSent","sendCodeClicked","emailSent","ForgotPassword","reset","setReset","resetPassword","updatePassword","passwordReset","ChangePassword","setOldPassword","oldPasswordIsValid","setNewPassword","newPasswordIsValid","theme","title","Landing","src","alt","Header","Context","user","setUser","avatar","confirm","removeItem","withModal","ModalComponent","WrapperComponent","isModalShown","setIsModalShown","toggleModal","props","selectedFrom","selectedTo","setIsLoading","setRideRequest","uuidv4","isFrom","setIsFrom","searchResults","setSearchResults","setSelectedFrom","setSelectedTo","provider","useRef","searchRef","initProvider","shouldRequestDriver","useCallback","current","GoogleProvider","params","key","OpenStreetMapProvider","countrycodes","type","placeholder","e","input","search","query","then","results","ref","map","index","selectedLocation","x","y","viewBox","transform","fillRule","clipRule","d","opacity","RideDetail","isDriver","currentRide","setCurrentRide","updateRide","ride","phone","pickup","destination","status","require","Home","isLoading","cometChat","rideRequest","routeControl","initMap","initRouteControl","drawRoute","from","to","shouldRouteDrawed","fromLatLng","L","LatLng","toLatLng","setWaypoints","center","zoom","layers","tileLayer","attribution","Routing","control","show","fitSelectedRoutes","plan","lineOptions","styles","weight","router","mapbox","addTo","getPlan","id","driver","lightTheme","createMuiTheme","palette","responsiveFontSizes","SignInRoute","path","component","MainRoute","App","ThemeProvider","CssBaseline","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.dfb8f617.chunk.js","sourcesContent":["import { AuthenticationDetails, CognitoUser, CognitoUserAttribute, CognitoUserPool } from 'amazon-cognito-identity-js'\n\nconst userPoolId = process.env.REACT_APP_USERPOOL_ID\nconst clientId = process.env.REACT_APP_CLIENT_ID\n\nconsole.log(`userpool id=${userPoolId}`)\nconsole.log(`client id=${clientId}`)\n\nconst poolData = {\n  UserPoolId: `${userPoolId}`,\n  ClientId: `${clientId}`,\n}\n\nconst userPool: CognitoUserPool = new CognitoUserPool(poolData)\n\nlet currentUser: any = userPool.getCurrentUser()\n\nexport function getCurrentUser() {\n  return currentUser\n}\n\nfunction getCognitoUser(username: string) {\n  const userData = {\n    Username: username,\n    Pool: userPool,\n  }\n  const cognitoUser = new CognitoUser(userData)\n\n  return cognitoUser\n}\n\nexport async function getSession() {\n  if (!currentUser) {\n    currentUser = userPool.getCurrentUser()\n  }\n\n  return new Promise(function (resolve, reject) {\n    currentUser.getSession(function (err: any, session: any) {\n      if (err) {\n        reject(err)\n      } else {\n        resolve(session)\n      }\n    })\n  }).catch((err) => {\n    throw err\n  })\n}\n\nexport async function signUpUserWithEmail(username: string, email: string, password: string) {\n  return new Promise(function (resolve, reject) {\n    const attributeList = [\n      new CognitoUserAttribute({\n            Name: 'email',\n            Value: email,\n          }),\n      new CognitoUserAttribute({\n            Name: 'name',\n            Value: 'na',\n          }),\n      new CognitoUserAttribute({\n            Name: 'preferred_username',\n            Value: 'na',\n          })\n    ]\n\n    userPool.signUp(username, password, attributeList, [], function (err, res) {\n      if (err) {\n        reject(err)\n      } else {\n        resolve(res)\n      }\n    })\n  }).catch((err) => {\n    throw err\n  })\n}\n\nexport async function verifyCode(username: string, code: string) {\n  return new Promise(function (resolve, reject) {\n    const cognitoUser = getCognitoUser(username)\n\n    cognitoUser.confirmRegistration(code, true, function (err, result) {\n      if (err) {\n        reject(err)\n      } else {\n        resolve(result)\n      }\n    })\n  }).catch((err) => {\n    throw err\n  })\n}\n\nexport async function signInWithEmail(username: string, password: string) {\n  return new Promise(function (resolve, reject) {\n    const authenticationData = {\n      Username: username,\n      Password: password,\n    }\n    const authenticationDetails = new AuthenticationDetails(authenticationData)\n\n    currentUser = getCognitoUser(username)\n\n    currentUser.authenticateUser(authenticationDetails, {\n      onSuccess: function (res: any) {\n        resolve(res)\n      },\n      onFailure: function (err: any) {\n        reject(err)\n      },\n    })\n  }).catch((err) => {\n    throw err\n  })\n}\n\nexport function signOut() {\n  if (currentUser) {\n    currentUser.signOut()\n  }\n}\n\nexport async function getAttributes() {\n  return new Promise(function (resolve, reject) {\n    currentUser.getUserAttributes(function (err: any, attributes: any) {\n      if (err) {\n        reject(err)\n      } else {\n        resolve(attributes)\n      }\n    })\n  }).catch((err) => {\n    throw err\n  })\n}\n\nexport async function setAttribute(attribute: any) {\n  return new Promise(function (resolve, reject) {\n    const attributeList = []\n    const res = new CognitoUserAttribute(attribute)\n    attributeList.push(res)\n\n    currentUser.updateAttributes(attributeList, (err: any, res: any) => {\n      if (err) {\n        reject(err)\n      } else {\n        resolve(res)\n      }\n    })\n  }).catch((err) => {\n    throw err\n  })\n}\n\nexport async function sendCode(username: string) {\n  return new Promise(function (resolve, reject) {\n    const cognitoUser = getCognitoUser(username)\n\n    if (!cognitoUser) {\n      reject(`could not find ${username}`)\n      return\n    }\n\n    cognitoUser.forgotPassword({\n      onSuccess: function (res) {\n        resolve(res)\n      },\n      onFailure: function (err) {\n        reject(err)\n      },\n    })\n  }).catch((err) => {\n    throw err\n  })\n}\n\nexport async function forgotPassword(username: string, code: string, password: string) {\n  return new Promise(function (resolve, reject) {\n    const cognitoUser = getCognitoUser(username)\n\n    if (!cognitoUser) {\n      reject(`could not find ${username}`)\n      return\n    }\n\n    cognitoUser.confirmPassword(code, password, {\n      onSuccess: function () {\n        resolve('password updated')\n      },\n      onFailure: function (err) {\n        reject(err)\n      },\n    })\n  })\n}\n\nexport async function changePassword(oldPassword: string, newPassword: string) {\n  return new Promise(function (resolve, reject) {\n    currentUser.changePassword(oldPassword, newPassword, function (err: any, res: any) {\n      if (err) {\n        reject(err)\n      } else {\n        resolve(res)\n      }\n    })\n  })\n}\n","import React, { useState, useEffect, useContext } from 'react'\n\nimport * as cognito from '../libs/cognito'\n\nexport enum AuthStatus {\n  Loading,\n  SignedIn,\n  SignedOut,\n}\n\nexport interface IAuth {\n  sessionInfo?: { username?: string; email?: string; sub?: string; accessToken?: string; refreshToken?: string }\n  attrInfo?: any\n  authStatus?: AuthStatus\n  signInWithEmail?: any\n  signUpWithEmail?: any\n  signOut?: any\n  verifyCode?: any\n  getSession?: any\n  sendCode?: any\n  forgotPassword?: any\n  changePassword?: any\n  getAttributes?: any\n  setAttribute?: any\n}\n\nconst defaultState: IAuth = {\n  sessionInfo: {},\n  authStatus: AuthStatus.Loading,\n}\n\nexport const AuthContext = React.createContext(defaultState)\n\nexport const AuthIsSignedIn: React.FunctionComponent = ({ children }) => {\n  const { authStatus }: IAuth = useContext(AuthContext)\n\n  return <>{authStatus === AuthStatus.SignedIn ? children : null}</>\n}\n\nexport const AuthIsNotSignedIn: React.FunctionComponent = ({ children }) => {\n  const { authStatus }: IAuth = useContext(AuthContext)\n\n  return <>{authStatus === AuthStatus.SignedOut ? children : null}</>\n}\n\nconst AuthProvider: React.FunctionComponent = ({ children }) => {\n  const [authStatus, setAuthStatus] = useState(AuthStatus.Loading)\n  const [sessionInfo, setSessionInfo] = useState({})\n  const [attrInfo, setAttrInfo] = useState([])\n\n  useEffect(() => {\n    async function getSessionInfo() {\n      try {\n        const session: any = await getSession()\n        setSessionInfo({\n          accessToken: session.accessToken.jwtToken,\n          refreshToken: session.refreshToken.token,\n        })\n        window.localStorage.setItem('accessToken', `${session.accessToken.jwtToken}`)\n        window.localStorage.setItem('refreshToken', `${session.refreshToken.token}`)\n        await setAttribute({ Name: 'website', Value: 'https://github.com/dbroadhurst/aws-cognito-react' })\n        const attr: any = await getAttributes()\n        setAttrInfo(attr)\n        setAuthStatus(AuthStatus.SignedIn)\n      } catch (err) {\n        setAuthStatus(AuthStatus.SignedOut)\n      }\n    }\n    getSessionInfo()\n  }, [setAuthStatus, authStatus])\n\n  if (authStatus === AuthStatus.Loading) {\n    return null\n  }\n\n  async function signInWithEmail(username: string, password: string) {\n    try {\n      await cognito.signInWithEmail(username, password)\n      setAuthStatus(AuthStatus.SignedIn)\n    } catch (err) {\n      setAuthStatus(AuthStatus.SignedOut)\n      throw err\n    }\n  }\n\n  async function signUpWithEmail(username: string, email: string, password: string) {\n    try {\n      await cognito.signUpUserWithEmail(username, email, password)\n    } catch (err) {\n      throw err\n    }\n  }\n\n  function signOut() {\n    cognito.signOut()\n    setAuthStatus(AuthStatus.SignedOut)\n  }\n\n  async function verifyCode(username: string, code: string) {\n    try {\n      await cognito.verifyCode(username, code)\n    } catch (err) {\n      throw err\n    }\n  }\n\n  async function getSession() {\n    try {\n      const session = await cognito.getSession()\n      return session\n    } catch (err) {\n      throw err\n    }\n  }\n\n  async function getAttributes() {\n    try {\n      const attr = await cognito.getAttributes()\n      return attr\n    } catch (err) {\n      throw err\n    }\n  }\n\n  async function setAttribute(attr: any) {\n    try {\n      const res = await cognito.setAttribute(attr)\n      return res\n    } catch (err) {\n      throw err\n    }\n  }\n\n  async function sendCode(username: string) {\n    try {\n      await cognito.sendCode(username)\n    } catch (err) {\n      throw err\n    }\n  }\n\n  async function forgotPassword(username: string, code: string, password: string) {\n    try {\n      await cognito.forgotPassword(username, code, password)\n    } catch (err) {\n      throw err\n    }\n  }\n\n  async function changePassword(oldPassword: string, newPassword: string) {\n    try {\n      await cognito.changePassword(oldPassword, newPassword)\n    } catch (err) {\n      throw err\n    }\n  }\n\n  const state: IAuth = {\n    authStatus,\n    sessionInfo,\n    attrInfo,\n    signUpWithEmail,\n    signInWithEmail,\n    signOut,\n    verifyCode,\n    getSession,\n    sendCode,\n    forgotPassword,\n    changePassword,\n    getAttributes,\n    setAttribute,\n  }\n\n  return <AuthContext.Provider value={state}>{children}</AuthContext.Provider>\n}\n\nexport default AuthProvider\n","import { useState, useEffect } from 'react'\n\nimport * as yup from 'yup'\n\nexport const useValidEmail = (initialValue: string) => {\n  const [email, setEmail] = useState(initialValue)\n  const [emailIsValid, setEmailIsValid] = useState(true)\n\n  useEffect(() => {\n    const emailSchema = yup.object().shape({\n      email: yup.string().email().required(),\n    })\n\n    if (email.length === 0) {\n      setEmailIsValid(true)\n      return\n    }\n\n    const isValid = emailSchema.isValidSync({ email })\n\n    setEmailIsValid(isValid)\n  }, [email])\n\n  return { email, setEmail, emailIsValid }\n}\n\nexport const useValidPassword = (initialValue: string) => {\n  const [password, setPassword] = useState(initialValue)\n  const [passwordIsValid, setPasswordIsValid] = useState(true)\n\n  useEffect(() => {\n    const passwordSchema = yup.object().shape({\n      password: yup.string().min(8).required(),\n    })\n\n    if (password.length === 0) {\n      setPasswordIsValid(true)\n      return\n    }\n\n    const isValid = passwordSchema.isValidSync({ password })\n\n    setPasswordIsValid(isValid)\n  }, [password])\n\n  return { password, setPassword, passwordIsValid }\n}\n\nexport const useValidUsername = (initialValue: string) => {\n  const [username, setUsername] = useState(initialValue)\n  const [usernameIsValid, setUsernameIsValid] = useState(true)\n\n  useEffect(() => {\n    const usernameSchema = yup.object().shape({\n      username: yup.string().min(8).required(),\n    })\n\n    if (username.length === 0) {\n      setUsernameIsValid(true)\n      return\n    }\n\n    const isValid = usernameSchema.isValidSync({ username })\n\n    setUsernameIsValid(isValid)\n  }, [username])\n\n  return { username, setUsername, usernameIsValid }\n}\n\nexport const useValidCode = (initialValue: string) => {\n  const [code, setCode] = useState(initialValue)\n  const [codeIsValid, setCodeIsValid] = useState(true)\n\n  useEffect(() => {\n    const codeSchema = yup.object().shape({\n      code: yup.string().min(6).required(),\n    })\n\n    if (code.length === 0) {\n      setCodeIsValid(true)\n      return\n    }\n\n    const isValid = codeSchema.isValidSync({ code })\n\n    setCodeIsValid(isValid)\n  }, [code])\n\n  return { code, setCode, codeIsValid }\n}\n","import React from 'react'\n\nimport TextField from '@material-ui/core/TextField'\n\nexport const Email: React.FunctionComponent<{ emailIsValid: boolean; setEmail: (_: string) => void }> = ({\n  emailIsValid,\n  setEmail,\n}) => {\n  return (\n    <TextField\n      fullWidth\n      variant=\"outlined\"\n      label={emailIsValid ? 'Email' : 'Invalid Email'}\n      error={!emailIsValid}\n      onChange={(evt: React.ChangeEvent<HTMLTextAreaElement>) => {\n        setEmail(evt.target.value)\n      }}\n    />\n  )\n}\n\nexport const Password: React.FunctionComponent<{\n  label: string\n  passwordIsValid: boolean\n  setPassword: (_: string) => void\n}> = ({ label, passwordIsValid, setPassword }) => {\n  return (\n    <TextField\n      fullWidth\n      variant=\"outlined\"\n      label={passwordIsValid ? label : 'Minimum 8 characters'}\n      error={!passwordIsValid}\n      onChange={(evt: React.ChangeEvent<HTMLTextAreaElement>) => {\n        setPassword(evt.target.value)\n      }}\n    />\n  )\n}\n\nexport const Username: React.FunctionComponent<{ usernameIsValid: boolean; setUsername: (_: string) => void }> = ({\n  usernameIsValid,\n  setUsername,\n}) => {\n  return (\n    <TextField\n      fullWidth\n      variant=\"outlined\"\n      label={usernameIsValid ? 'Username' : 'Minimum 8 characters'}\n      error={!usernameIsValid}\n      onChange={(evt: React.ChangeEvent<HTMLTextAreaElement>) => {\n        setUsername(evt.target.value)\n      }}\n    />\n  )\n}\n\nexport const Code: React.FunctionComponent<{ codeIsValid: boolean; setCode: (_: string) => void }> = ({\n  codeIsValid,\n  setCode,\n}) => {\n  return (\n    <TextField\n      fullWidth\n      variant=\"outlined\"\n      label={codeIsValid ? 'Code' : 'Minimum 6 characters'}\n      error={!codeIsValid}\n      onChange={(evt: React.ChangeEvent<HTMLTextAreaElement>) => {\n        setCode(evt.target.value)\n      }}\n    />\n  )\n}\n","import React, { useState, useContext } from 'react'\n\nimport { useHistory } from 'react-router-dom'\n\nimport { makeStyles } from '@material-ui/core/styles'\nimport Box from '@material-ui/core/Box'\nimport Grid from '@material-ui/core/Grid'\nimport Button from '@material-ui/core/Button'\nimport Typography from '@material-ui/core/Typography'\nimport Paper from '@material-ui/core/Paper'\n\nimport { useValidPassword, useValidUsername } from '../../hooks/useAuthHooks'\nimport { Password, Username } from '../../components/authComponents'\n\nimport { AuthContext } from '../../contexts/authContext'\n\nconst useStyles = makeStyles({\n  root: {\n    height: '100vh',\n  },\n  hover: {\n    '&:hover': { cursor: 'pointer' },\n  },\n})\n\nconst SignIn: React.FunctionComponent<{}> = () => {\n  const classes = useStyles()\n\n  const { username, setUsername, usernameIsValid } = useValidUsername('')\n  const { password, setPassword, passwordIsValid } = useValidPassword('')\n  const [error, setError] = useState('')\n\n  const isValid = !usernameIsValid || username.length === 0 || !passwordIsValid || password.length === 0\n\n  const history = useHistory()\n\n  const authContext = useContext(AuthContext)\n\n  const signInClicked = async () => {\n    try {\n      await authContext.signInWithEmail(username, password)\n      history.push('home')\n    } catch (err: any) {\n      if (err.code === 'UserNotConfirmedException') {\n        history.push('verify')\n      } else {\n        setError(err.message)\n      }\n    }\n  }\n\n  const passwordResetClicked = async () => {\n    history.push('requestcode')\n  }\n\n  return (\n    <Grid className={classes.root} container direction=\"row\" justify=\"center\" alignItems=\"center\">\n      <Grid xs={11} sm={6} lg={4} container direction=\"row\" justify=\"center\" alignItems=\"center\" item>\n        <Paper style={{ width: '100%', padding: 32 }}>\n          <Grid container direction=\"column\" justify=\"center\" alignItems=\"center\">\n            {/* Title */}\n            <Box m={2}>\n              <Typography variant=\"h3\">Sign in</Typography>\n            </Box>\n\n            {/* Sign In Form */}\n            <Box width=\"80%\" m={1}>\n              {/* <Email emailIsValid={emailIsValid} setEmail={setEmail} /> */}\n              <Username usernameIsValid={usernameIsValid} setUsername={setUsername} />{' '}\n            </Box>\n            <Box width=\"80%\" m={1}>\n              <Password label=\"Password\" passwordIsValid={passwordIsValid} setPassword={setPassword} />\n              <Grid container direction=\"row\" justify=\"flex-start\" alignItems=\"center\">\n                <Box onClick={passwordResetClicked} mt={2}>\n                  <Typography className={classes.hover} variant=\"body2\">\n                    Forgot Password?\n                  </Typography>\n                </Box>\n              </Grid>\n            </Box>\n\n            {/* Error */}\n            <Box mt={2}>\n              <Typography color=\"error\" variant=\"body2\">\n                {error}\n              </Typography>\n            </Box>\n\n            {/* Buttons */}\n            <Box mt={2}>\n              <Grid container direction=\"row\" justify=\"center\">\n                <Box m={1}>\n                  <Button color=\"secondary\" variant=\"contained\" onClick={() => history.goBack()}>\n                    Cancel\n                  </Button>\n                </Box>\n                <Box m={1}>\n                  <Button disabled={isValid} color=\"primary\" variant=\"contained\" onClick={signInClicked}>\n                    Sign In\n                  </Button>\n                </Box>\n              </Grid>\n            </Box>\n            <Box mt={2}>\n              <Box onClick={() => history.push('signup')}>\n                <Typography className={classes.hover} variant=\"body1\">\n                  Register a new account\n                </Typography>\n              </Box>\n            </Box>\n          </Grid>\n        </Paper>\n      </Grid>\n    </Grid>\n  )\n}\n\nexport default SignIn\n","import React, { useState, useContext } from 'react'\n\nimport { useHistory } from 'react-router-dom'\n\nimport { makeStyles } from '@material-ui/core/styles'\nimport Box from '@material-ui/core/Box'\nimport Grid from '@material-ui/core/Grid'\nimport Button from '@material-ui/core/Button'\nimport Typography from '@material-ui/core/Typography'\nimport Paper from '@material-ui/core/Paper'\n\nimport { useValidEmail, useValidPassword, useValidUsername } from '../../hooks/useAuthHooks'\nimport { Email, Password, Username } from '../../components/authComponents'\n\nimport { AuthContext } from '../../contexts/authContext'\n\nconst useStyles = makeStyles({\n  root: {\n    height: '100vh',\n  },\n})\n\nconst SignUp: React.FunctionComponent<{}> = () => {\n  const classes = useStyles()\n\n  const { email, setEmail, emailIsValid } = useValidEmail('')\n  const { password, setPassword, passwordIsValid } = useValidPassword('')\n  const { username, setUsername, usernameIsValid } = useValidUsername('')\n  const [error, setError] = useState('')\n  const [created, setCreated] = useState(false)\n\n  const {\n    password: passwordConfirm,\n    setPassword: setPasswordConfirm,\n    passwordIsValid: passwordConfirmIsValid,\n  } = useValidPassword('')\n\n  const isValid =\n    !emailIsValid ||\n    email.length === 0 ||\n    !usernameIsValid ||\n    username.length === 0 ||\n    !passwordIsValid ||\n    password.length === 0 ||\n    !passwordConfirmIsValid ||\n    passwordConfirm.length === 0\n\n  const history = useHistory()\n\n  const authContext = useContext(AuthContext)\n\n  const signInClicked = async () => {\n    try {\n      await authContext.signUpWithEmail(username, email, password)\n      setCreated(true)\n    } catch (err) {\n      if (err instanceof Error) {\n        setError(err.message)\n      }\n    }\n  }\n\n  const signUp = (\n    <>\n      <Box width=\"80%\" m={1}>\n        <Email emailIsValid={emailIsValid} setEmail={setEmail} />\n      </Box>\n      <Box width=\"80%\" m={1}>\n        <Username usernameIsValid={usernameIsValid} setUsername={setUsername} />\n      </Box>\n      <Box width=\"80%\" m={1}>\n        <Password label=\"Password\" passwordIsValid={passwordIsValid} setPassword={setPassword} />\n      </Box>\n      <Box width=\"80%\" m={1}>\n        <Password label=\"Confirm Password\" passwordIsValid={passwordConfirmIsValid} setPassword={setPasswordConfirm} />\n      </Box>\n      <Box mt={2}>\n        <Typography color=\"error\" variant=\"body2\">\n          {error}\n        </Typography>\n      </Box>\n\n      {/* Buttons */}\n      <Box mt={2}>\n        <Grid container direction=\"row\" justify=\"center\">\n          <Box m={1}>\n            <Button onClick={() => history.goBack()} color=\"secondary\" variant=\"contained\">\n              Cancel\n            </Button>\n          </Box>\n          <Box m={1}>\n            <Button disabled={isValid} color=\"primary\" variant=\"contained\" onClick={signInClicked}>\n              Sign Up\n            </Button>\n          </Box>\n        </Grid>\n      </Box>\n    </>\n  )\n\n  const accountCreated = (\n    <>\n      <Typography variant=\"h5\">{`Created ${username} account`}</Typography>\n      <Typography variant=\"h6\">{`Verfiy Code sent to ${email}`}</Typography>\n\n      <Box m={4}>\n        <Button onClick={() => history.push('/verify')} color=\"primary\" variant=\"contained\">\n          Send Code\n        </Button>\n      </Box>\n    </>\n  )\n\n  return (\n    <Grid className={classes.root} container direction=\"row\" justify=\"center\" alignItems=\"center\">\n      <Grid xs={11} sm={6} lg={4} container direction=\"row\" justify=\"center\" alignItems=\"center\" item>\n        <Paper style={{ width: '100%', padding: 16 }}>\n          <Grid container direction=\"column\" justify=\"center\" alignItems=\"center\">\n            {/* Title */}\n            <Box m={3}>\n              <Grid container direction=\"row\" justify=\"center\" alignItems=\"center\">\n                <Typography variant=\"h3\">Sign Up</Typography>\n              </Grid>\n            </Box>\n\n            {!created ? signUp : accountCreated}\n          </Grid>\n        </Paper>\n      </Grid>\n    </Grid>\n  )\n}\n\nexport default SignUp\n","import React, { useState, useContext } from 'react'\n\nimport { useHistory } from 'react-router-dom'\n\nimport { makeStyles } from '@material-ui/core/styles'\nimport Box from '@material-ui/core/Box'\nimport Grid from '@material-ui/core/Grid'\nimport Button from '@material-ui/core/Button'\nimport Typography from '@material-ui/core/Typography'\nimport Paper from '@material-ui/core/Paper'\n\nimport { useValidCode, useValidUsername } from '../../hooks/useAuthHooks'\nimport { Code, Username } from '../../components/authComponents'\n\nimport { AuthContext } from '../../contexts/authContext'\n\nconst useStyles = makeStyles({\n  root: {\n    height: '100vh',\n  },\n  hover: {\n    '&:hover': { cursor: 'pointer' },\n  },\n})\n\nconst VerifyCode: React.FunctionComponent<{}> = () => {\n  const classes = useStyles()\n\n  const { username, setUsername, usernameIsValid } = useValidUsername('')\n  const { code, setCode, codeIsValid } = useValidCode('')\n  const [error, setError] = useState('')\n\n  const isValid = !usernameIsValid || username.length === 0 || !codeIsValid || code.length === 0\n\n  const history = useHistory()\n\n  const authContext = useContext(AuthContext)\n\n  const sendClicked = async () => {\n    try {\n      await authContext.verifyCode(username, code)\n      history.push('signin')\n    } catch (err) {\n      setError('Invalid Code')\n    }\n  }\n\n  const passwordResetClicked = async () => {\n    history.push('/resetpassword')\n  }\n\n  return (\n    <Grid className={classes.root} container direction=\"row\" justify=\"center\" alignItems=\"center\">\n      <Grid xs={11} sm={6} lg={4} container direction=\"row\" justify=\"center\" alignItems=\"center\" item>\n        <Paper style={{ width: '100%', padding: 32 }}>\n          <Grid container direction=\"column\" justify=\"center\" alignItems=\"center\">\n            {/* Title */}\n            <Box m={2}>\n              <Typography variant=\"h3\">Send Code</Typography>\n            </Box>\n\n            {/* Sign In Form */}\n            <Box width=\"80%\" m={1}>\n              {/* <Email emailIsValid={emailIsValid} setEmail={setEmail} /> */}\n              <Username usernameIsValid={usernameIsValid} setUsername={setUsername} />{' '}\n            </Box>\n            <Box width=\"80%\" m={1}>\n              <Code codeIsValid={codeIsValid} setCode={setCode} />\n              <Grid container direction=\"row\" justify=\"flex-start\" alignItems=\"center\">\n                <Box onClick={passwordResetClicked} mt={2}>\n                  <Typography className={classes.hover} variant=\"body2\">\n                    Resend Code\n                  </Typography>\n                  <Box mt={2}>\n                    <Typography color=\"error\" variant=\"body2\">\n                      {error}\n                    </Typography>\n                  </Box>\n                </Box>\n              </Grid>\n            </Box>\n\n            {/* Buttons */}\n            <Box mt={2}>\n              <Grid container direction=\"row\" justify=\"center\">\n                <Box m={1}>\n                  <Button color=\"secondary\" variant=\"contained\" onClick={() => history.goBack()}>\n                    Cancel\n                  </Button>\n                </Box>\n                <Box m={1}>\n                  <Button disabled={isValid} color=\"primary\" variant=\"contained\" onClick={sendClicked}>\n                    Send\n                  </Button>\n                </Box>\n              </Grid>\n            </Box>\n          </Grid>\n        </Paper>\n      </Grid>\n    </Grid>\n  )\n}\n\nexport default VerifyCode\n","import React, { useState, useContext } from 'react'\n\nimport { useHistory } from 'react-router-dom'\n\nimport { makeStyles } from '@material-ui/core/styles'\nimport Box from '@material-ui/core/Box'\nimport Grid from '@material-ui/core/Grid'\nimport Button from '@material-ui/core/Button'\nimport Typography from '@material-ui/core/Typography'\nimport Paper from '@material-ui/core/Paper'\n\nimport { useValidUsername } from '../../hooks/useAuthHooks'\nimport { Username } from '../../components/authComponents'\n\nimport { AuthContext } from '../../contexts/authContext'\n\nconst useStyles = makeStyles({\n  root: {\n    height: '100vh',\n  },\n  hover: {\n    '&:hover': { cursor: 'pointer' },\n  },\n  text: {\n    textAlign: 'center',\n  },\n})\n\nexport default function RequestCode() {\n  const classes = useStyles()\n\n  const { username, setUsername, usernameIsValid } = useValidUsername('')\n  const [error, setError] = useState('')\n  const [resetSent, setResetSent] = useState(false)\n\n  const isValid = !usernameIsValid || username.length === 0\n\n  const history = useHistory()\n\n  const authContext = useContext(AuthContext)\n\n  const sendCodeClicked = async () => {\n    try {\n      await authContext.sendCode(username)\n      setResetSent(true)\n    } catch (err) {\n      setError('Unknown user')\n    }\n  }\n\n  const emailSent = (\n    <>\n      <Box mt={1}>\n        <Typography className={classes.text} variant=\"h5\">{`Reset Code Sent to ${username}`}</Typography>\n      </Box>\n      <Box mt={4}>\n        <Button onClick={() => history.push('forgotpassword')} color=\"primary\" variant=\"contained\">\n          Reset Password\n        </Button>\n      </Box>\n    </>\n  )\n\n  const sendCode = (\n    <>\n      <Box width=\"80%\" m={1}>\n        <Username usernameIsValid={usernameIsValid} setUsername={setUsername} />\n      </Box>\n      <Box mt={2}>\n        <Typography color=\"error\" variant=\"body2\">\n          {error}\n        </Typography>\n      </Box>\n\n      <Box mt={2}>\n        <Grid container direction=\"row\" justify=\"center\">\n          <Box m={1}>\n            <Button color=\"secondary\" variant=\"contained\" onClick={() => history.goBack()}>\n              Cancel\n            </Button>\n          </Box>\n          <Box m={1}>\n            <Button disabled={isValid} color=\"primary\" variant=\"contained\" onClick={sendCodeClicked}>\n              Send Code\n            </Button>\n          </Box>\n        </Grid>\n      </Box>\n    </>\n  )\n\n  return (\n    <Grid className={classes.root} container direction=\"row\" justify=\"center\" alignItems=\"center\">\n      <Grid xs={11} sm={6} lg={4} container direction=\"row\" justify=\"center\" alignItems=\"center\" item>\n        <Paper style={{ width: '100%', padding: 32 }}>\n          <Grid container direction=\"column\" justify=\"center\" alignItems=\"center\">\n            <Box m={2}>\n              <Typography variant=\"h3\">Send Reset Code</Typography>\n            </Box>\n\n            {resetSent ? emailSent : sendCode}\n          </Grid>\n        </Paper>\n      </Grid>\n    </Grid>\n  )\n}\n","import React, { useState, useContext } from 'react'\n\nimport { useHistory } from 'react-router-dom'\n\nimport { makeStyles } from '@material-ui/core/styles'\nimport Box from '@material-ui/core/Box'\nimport Grid from '@material-ui/core/Grid'\nimport Button from '@material-ui/core/Button'\nimport Typography from '@material-ui/core/Typography'\nimport Paper from '@material-ui/core/Paper'\n\nimport { useValidCode, useValidPassword, useValidUsername } from '../../hooks/useAuthHooks'\nimport { Code, Password, Username } from '../../components/authComponents'\n\nimport { AuthContext } from '../../contexts/authContext'\n\nconst useStyles = makeStyles({\n  root: {\n    height: '100vh',\n  },\n})\n\nexport default function ForgotPassword() {\n  const classes = useStyles()\n\n  const { code, setCode, codeIsValid } = useValidCode('')\n  const { password, setPassword, passwordIsValid } = useValidPassword('')\n  const { username, setUsername, usernameIsValid } = useValidUsername('')\n  const [error, setError] = useState('')\n  const [reset, setReset] = useState(false)\n\n  const {\n    password: passwordConfirm,\n    setPassword: setPasswordConfirm,\n    passwordIsValid: passwordConfirmIsValid,\n  } = useValidPassword('')\n\n  const isValid =\n    !codeIsValid ||\n    code.length === 0 ||\n    !usernameIsValid ||\n    username.length === 0 ||\n    !passwordIsValid ||\n    password.length === 0 ||\n    !passwordConfirmIsValid ||\n    passwordConfirm.length === 0\n\n  const history = useHistory()\n\n  const authContext = useContext(AuthContext)\n\n  const resetPassword = async () => {\n    try {\n      await authContext.forgotPassword(username, code, password)\n      setReset(true)\n    } catch (err) {\n      if (err instanceof Error) {\n        setError(err.message)\n      }\n    }\n  }\n\n  const updatePassword = (\n    <>\n      <Box width=\"80%\" m={1}>\n        <Code codeIsValid={codeIsValid} setCode={setCode} />\n      </Box>\n      <Box width=\"80%\" m={1}>\n        <Username usernameIsValid={usernameIsValid} setUsername={setUsername} />\n      </Box>\n      <Box width=\"80%\" m={1}>\n        <Password label=\"Password\" passwordIsValid={passwordIsValid} setPassword={setPassword} />\n      </Box>\n      <Box width=\"80%\" m={1}>\n        <Password label=\"Confirm Password\" passwordIsValid={passwordConfirmIsValid} setPassword={setPasswordConfirm} />\n      </Box>\n\n      {/* Error */}\n      <Box mt={2}>\n        <Typography color=\"error\" variant=\"body2\">\n          {error}\n        </Typography>\n      </Box>\n\n      {/* Buttons */}\n      <Box mt={2}>\n        <Grid container direction=\"row\" justify=\"center\">\n          <Box m={1}>\n            <Button onClick={() => history.goBack()} color=\"secondary\" variant=\"contained\">\n              Cancel\n            </Button>\n          </Box>\n          <Box m={1}>\n            <Button disabled={isValid} color=\"primary\" variant=\"contained\" onClick={resetPassword}>\n              Change Password\n            </Button>\n          </Box>\n        </Grid>\n      </Box>\n    </>\n  )\n\n  const passwordReset = (\n    <>\n      <Typography variant=\"h5\">{`Password Reset`}</Typography>\n\n      <Box m={4}>\n        <Button onClick={() => history.push('/signin')} color=\"primary\" variant=\"contained\">\n          Sign In\n        </Button>\n      </Box>\n    </>\n  )\n\n  return (\n    <Grid className={classes.root} container direction=\"row\" justify=\"center\" alignItems=\"center\">\n      <Grid xs={11} sm={6} lg={4} container direction=\"row\" justify=\"center\" alignItems=\"center\" item>\n        <Paper style={{ width: '100%', padding: 16 }}>\n          <Grid container direction=\"column\" justify=\"center\" alignItems=\"center\">\n            {/* Title */}\n            <Box m={3}>\n              <Grid container direction=\"row\" justify=\"center\" alignItems=\"center\">\n                <Typography variant=\"h3\">Forgot Password</Typography>\n              </Grid>\n            </Box>\n\n            {!reset ? updatePassword : passwordReset}\n          </Grid>\n        </Paper>\n      </Grid>\n    </Grid>\n  )\n}\n","import React, { useState, useContext } from 'react'\n\nimport { useHistory } from 'react-router-dom'\n\nimport { makeStyles } from '@material-ui/core/styles'\nimport Box from '@material-ui/core/Box'\nimport Grid from '@material-ui/core/Grid'\nimport Button from '@material-ui/core/Button'\nimport Typography from '@material-ui/core/Typography'\nimport Paper from '@material-ui/core/Paper'\n\nimport { useValidPassword } from '../../hooks/useAuthHooks'\nimport { Password } from '../../components/authComponents'\n\nimport { AuthContext } from '../../contexts/authContext'\n\nconst useStyles = makeStyles({\n  root: {\n    height: '100vh',\n  },\n})\n\nexport default function ChangePassword() {\n  const classes = useStyles()\n\n  const [error, setError] = useState('')\n  const [reset, setReset] = useState(false)\n\n  const {\n    password: oldPassword,\n    setPassword: setOldPassword,\n    passwordIsValid: oldPasswordIsValid,\n  } = useValidPassword('')\n\n  const {\n    password: newPassword,\n    setPassword: setNewPassword,\n    passwordIsValid: newPasswordIsValid,\n  } = useValidPassword('')\n\n  const isValid = !oldPasswordIsValid || oldPassword.length === 0 || !newPasswordIsValid || newPassword.length === 0\n\n  const history = useHistory()\n\n  const authContext = useContext(AuthContext)\n\n  const changePassword = async () => {\n    try {\n      await authContext.changePassword(oldPassword, newPassword)\n      setReset(true)\n    } catch (err: any) {\n      setError(err.message)\n    }\n  }\n\n  const signOut = async () => {\n    try {\n      await authContext.signOut()\n      history.push('/')\n    } catch (err) {\n      if (err instanceof Error) {\n        setError(err.message)\n      }\n    }\n  }\n\n  const updatePassword = (\n    <>\n      <Box width=\"80%\" m={1}>\n        <Password label=\"Old Password\" passwordIsValid={oldPasswordIsValid} setPassword={setOldPassword} />\n      </Box>\n      <Box width=\"80%\" m={1}>\n        <Password label=\"Password\" passwordIsValid={newPasswordIsValid} setPassword={setNewPassword} />\n      </Box>\n      {/* Error */}\n      <Box mt={2}>\n        <Typography color=\"error\" variant=\"body2\">\n          {error}\n        </Typography>\n      </Box>\n\n      {/* Buttons */}\n      <Box mt={2}>\n        <Grid container direction=\"row\" justify=\"center\">\n          <Box m={1}>\n            <Button onClick={() => history.goBack()} color=\"secondary\" variant=\"contained\">\n              Cancel\n            </Button>\n          </Box>\n          <Box m={1}>\n            <Button disabled={isValid} color=\"primary\" variant=\"contained\" onClick={changePassword}>\n              Change Password\n            </Button>\n          </Box>\n        </Grid>\n      </Box>\n    </>\n  )\n\n  const passwordReset = (\n    <>\n      <Typography variant=\"h5\">{`Password Changed`}</Typography>\n\n      <Box m={4}>\n        <Button onClick={signOut} color=\"primary\" variant=\"contained\">\n          Sign In\n        </Button>\n      </Box>\n    </>\n  )\n\n  return (\n    <Grid className={classes.root} container direction=\"row\" justify=\"center\" alignItems=\"center\">\n      <Grid xs={11} sm={6} lg={4} container direction=\"row\" justify=\"center\" alignItems=\"center\" item>\n        <Paper style={{ width: '100%', padding: 16 }}>\n          <Grid container direction=\"column\" justify=\"center\" alignItems=\"center\">\n            {/* Title */}\n            <Box m={3}>\n              <Grid container direction=\"row\" justify=\"center\" alignItems=\"center\">\n                <Typography variant=\"h3\">Change Password</Typography>\n              </Grid>\n            </Box>\n\n            {!reset ? updatePassword : passwordReset}\n          </Grid>\n        </Paper>\n      </Grid>\n    </Grid>\n  )\n}\n","import React from 'react'\n\nimport { useHistory } from 'react-router-dom'\n\nimport { makeStyles } from '@material-ui/core/styles'\n\nimport Typography from '@material-ui/core/Typography'\nimport Grid from '@material-ui/core/Grid'\nimport Box from '@material-ui/core/Box'\nimport Button from '@material-ui/core/Button'\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100vh',\n  },\n  title: {\n    textAlign: 'center',\n  },\n}))\n\nconst Landing: React.FunctionComponent = () => {\n  const classes = useStyles()\n\n  const history = useHistory()\n\n  const signIn = () => {\n    history.push('/signin')\n  }\n\n  return (\n    <Grid container>\n      <Grid className={classes.root} container direction=\"column\" justify=\"center\" alignItems=\"center\">\n        <Box m={2}>\n          <img src={'./logomain.png'} width={224} height={224} alt=\"logo\" />\n        </Box>\n        <Box m={2}>\n            <Grid container direction=\"row\" justify=\"center\" alignItems=\"center\">\n              <Typography className={classes.title} variant=\"h3\">\n                Ride Share\n              </Typography>\n            </Grid>\n        </Box>\n        <Box m={2}>\n          <Button onClick={signIn} variant=\"contained\" color=\"primary\">\n            SIGN IN\n          </Button>\n        </Box>\n      </Grid>\n    </Grid>\n  )\n}\n\nexport default Landing\n","import React from 'react';\n\nexport default React.createContext(null);\n\n","// import useContext\nimport { useContext } from 'react';\n// import Context\nimport Context from '../Context';\n// import react router\nimport { useHistory } from 'react-router-dom';\n\n\nfunction Header() {\n  const { user, setUser } = useContext(Context);\n\n  const history = useHistory();\n\n  /**\n   * logout\n   */\n  const logout = () => {\n    const isLogout = window.confirm('Do you want to log out ?');\n    if (isLogout) {\n      // remove local storage.\n      localStorage.removeItem('auth');\n      // remove authenticated user from context.\n      setUser(null);\n      // redirect to login page.\n      history.push('/login');\n    }\n  }\n\n  return (\n    <div className=\"header\">\n      <div className=\"header__left\">\n        <img src='./logomain.png' alt=\"Uber Clone\" />\n        {\n          user && (\n            <div className=\"header__right\">\n              <img src={user.avatar} alt={user.email}/>\n              <span>Hello, {user.email}</span>\n            </div>\n          )\n        }\n      </div>\n      <span className=\"header__logout\" onClick={logout}><span>Logout</span></span>\n    </div>\n  );\n}\n\nexport default Header;\n","// import use state.\nimport { useState } from 'react';\nconst withModal = ModalComponent => WrapperComponent => {\n  return function () { \n    // state to show / hide custom modal.\n    const [isModalShown, setIsModalShown] = useState(false);\n    \n    return (\n      <>\n        <WrapperComponent toggleModal={setIsModalShown}/>\n        {isModalShown && <ModalComponent toggleModal={setIsModalShown} />}\n      </>\n    )\n  }\n}\n\nexport default withModal;","// import useContext, useState, useEffect, useRef, useCallback\nimport { useContext, useState, useEffect, useRef, useCallback } from 'react';\n// import Context\nimport Context from '../Context';\n// import\nimport { OpenStreetMapProvider, GoogleProvider } from 'leaflet-geosearch';\n// import custom components.\nimport withModal from './Modal';\nimport RequestRide from './RequestRide';\n\nfunction AddressPicker(props) {\n  const [isFrom, setIsFrom] = useState(true);\n  const [searchResults, setSearchResults] = useState([]);\n\n  const { selectedFrom, setSelectedFrom, selectedTo, setSelectedTo } = useContext(Context);\n\n  const provider = useRef();\n  const searchRef = useRef();\n\n  const { toggleModal } = props;\n\n  useEffect(() => {\n    initProvider();\n  }, []);\n\n  const shouldRequestDriver = useCallback( () => {\n    if (selectedFrom && selectedTo) {\n      // show confirmation dialog to request a driver.\n      toggleModal(true);\n    }\n  }, [selectedFrom, selectedTo, toggleModal]);\n\n  useEffect(() => {\n    if (selectedFrom && selectedTo) {\n      // check a driver should be requested, or not.\n      shouldRequestDriver();\n    }\n  }, [selectedFrom, selectedTo, shouldRequestDriver]);\n\n  /**\n   * handle input changed to get pick up location or destination.\n   */\n  const onInputChanged = (e) => {\n    const input = e.target.value;\n    provider.current.search({ query: input }).then(results => {\n      setSearchResults(() => results);\n    });\n  };\n\n  /**\n   * init provider.\n   */\n  const initProvider = () => {\n    provider.current = new GoogleProvider({\n      params: {\n        key: 'AIzaSyDW6k2gwu9L-SPyuFEDSHBPX4xtpEYrrLQ',\n      },\n    });\n    new OpenStreetMapProvider({\n      params: {\n        'accept-language': 'en',\n        countrycodes: \"us\"\n      }\n    });\n  }\n\n  /**\n   * select location.\n   * @param {*} selectedLocation\n   */\n  const onLocationSelected = (selectedLocation) => {\n    if (selectedLocation && selectedLocation.label && selectedLocation.x && selectedLocation.y) {\n      if (isFrom) {\n        // set pick up location.\n        console.log(selectedLocation);\n        setSelectedFrom(() => selectedLocation);\n        setIsFrom(() => false);\n      } else {\n        // set destination.\n        setSelectedTo(() => selectedLocation);\n        setIsFrom(() => true);\n      }\n      // clear search result.\n      setSearchResults(() => []);\n      // reset input value.\n      searchRef.current.value = '';\n    }\n  };\n\n  return (\n      <Context.Provider value={{selectedFrom, setSelectedFrom, selectedTo, setSelectedTo}}>\n      <div className=\"address\">\n        <div className=\"address__title\">\n          <div className=\"address__title-container\">\n            <p className=\"address__title-from\" onClick={() => setIsFrom(true)}>{selectedFrom && selectedFrom.label ? selectedFrom.label : 'Pickup location ?'}</p>\n            <p className=\"address__title-to\" onClick={() => setIsFrom(false)}>{selectedTo && selectedTo.label ? selectedTo.label : 'Destination ?'}</p>\n          </div>\n        </div>\n        <div className=\"search\">\n          <input\n              className=\"search__input\"\n              type=\"text\"\n              placeholder={isFrom ? 'Add a pickup location' : 'Enter your destination'}\n              onChange={onInputChanged}\n              ref={searchRef}\n          />\n          <div className=\"search__result\">\n            {\n                searchResults && searchResults.length !== 0 && searchResults.map((result, index) => (\n                    <div className=\"search__result-item\" key={index} onClick={() => onLocationSelected(result)}>\n                      <div className=\"search__result-icon\">\n                        <svg title=\"LocationMarkerFilled\" viewBox=\"0 0 24 24\" className=\"g2 ec db\"><g transform=\"matrix( 1 0 0 1 2.524993896484375 1.0250244140625 )\"><path fillRule=\"nonzero\" clipRule=\"nonzero\" d=\"M16.175 2.775C12.475 -0.925 6.475 -0.925 2.775 2.775C-0.925 6.475 -0.925 12.575 2.775 16.275L9.475 22.975L16.175 16.175C19.875 12.575 19.875 6.475 16.175 2.775ZM9.475 11.475C8.375 11.475 7.475 10.575 7.475 9.475C7.475 8.375 8.375 7.475 9.475 7.475C10.575 7.475 11.475 8.375 11.475 9.475C11.475 10.575 10.575 11.475 9.475 11.475Z\" opacity=\"1\"></path></g></svg>\n                      </div>\n                      <p className=\"search__result-label\">{result.label}</p>\n                    </div>\n                ))\n            }\n          </div>\n        </div>\n      </div>\n      </Context.Provider>\n  );\n}\n\nexport default withModal(RequestRide)(AddressPicker);\n","// import useContext.\nimport { useContext } from 'react';\n// import realtime database from Firebase.\n\n// import uuid to generate id for users.\nimport { v4 as uuidv4 } from \"uuid\";\n// import Context\nimport Context from '../Context';\n\nfunction RequestRide(props) {\n  // get toggleModal functin from higher order components.\n  const { toggleModal } = props;\n\n  const { user, selectedFrom, selectedTo, setRideRequest, setIsLoading } = useContext(Context);\n\n  /**\n   * request a ride\n   */\n  const requestRide = () => {\n    if (user && selectedFrom && selectedTo) {\n      // close the modal.\n      toggleModal(false);\n      // show loading indicator. \n      setIsLoading(true);\n      // create object.\n      const rideUuid = uuidv4();\n      const ride = {\n        \"rideUuid\": rideUuid,\n        \"requestor\": user,\n        \"pickup\": selectedFrom,\n        \"destination\": selectedTo,\n        \"status\": 0\n      }\n      // insert to Firebase realtime database.\n    }\n  };\n\n  return (\n    <div className=\"request-ride\">\n      <div className=\"request-ride__content\">\n        <div className=\"request-ride__container\">\n          <div className=\"request-ride__title\">Requesting a Ride</div>\n          <div className=\"request-ride__close\">\n            <img\n              alt=\"close\"\n              onClick={() => toggleModal(false)}\n              src=\"https://static.xx.fbcdn.net/rsrc.php/v3/y2/r/__geKiQnSG-.png\"\n            />\n          </div>\n        </div>\n        <div className=\"request-ride__subtitle\"></div>\n        <div className=\"request-ride__form\">\n          <p>\n            You entered the pickup location successfully. Do you want to request a ride now ?\n          </p>\n          <button className=\"request-ride__btn request-ride__change-btn\" onClick={() => toggleModal(false)}>\n            Change\n          </button>\n          <button className=\"request-ride__btn\" onClick={requestRide}>\n            Requesting a ride now\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default RequestRide;\n","// import useContext.\nimport { useContext } from 'react';\n// import firebase authentication.\n// import Context\nimport Context from '../Context';\n// import react router. \nimport { useHistory } from 'react-router-dom';\n\nfunction RideDetail(props) { \n  const { user, isDriver, currentRide } = props;\n\n  const { setCurrentRide, setIsLoading } = useContext(Context);\n\n  const history = useHistory();\n\n  /**\n   * remove ride from storage and context\n   */\n  const removeRideFromStorageAndContext = () => {\n    // remove localStorage.\n    localStorage.removeItem('currentRide');\n    // remove data from context.\n    setCurrentRide(null);\n    // reload window \n    window.location.reload();\n  }\n\n  const updateRide = (ride) => { \n    // show loading indicator.\n    setIsLoading(true);\n    // update data on Firebase.\n\n  }\n\n  /**\n   * cancel ride\n   */\n  const cancelRide = () => {\n    const isCancel = window.confirm('Do you want to cancel this ride?');\n    if (isCancel) {\n      // update data on Firebase.\n      currentRide.status = -1;\n      updateRide(currentRide);\n    }\n  };\n\n  /**\n   * finish ride\n   */\n  const finishRide = () => {\n    const isFinish = window.confirm('Do you want to finish this ride?');\n    if (isFinish) {\n      // update data on Firebase.\n      currentRide.status = 2;\n      updateRide(currentRide);\n    }\n  };\n\n  /**\n   * talk to user\n   */\n  const talkToUser = () => {\n    history.push('/chat');\n  };\n\n  return (\n    <div className=\"ride-detail\">\n      <div className=\"ride-detail__user-avatar\">\n        <img src={user.avatar} alt={user.email} />\n      </div>\n      <p className=\"ride-detail__user-info\">{user.email} - {user.phone}</p>\n      <div className=\"ride-detail__actions\">\n        <p className=\"ride-detail__result-label\"><span>From: </span>{currentRide.pickup && currentRide.pickup.label ? currentRide.pickup.label : ''}</p>\n        <p className=\"ride-detail__result-label\"><span>To: </span>{currentRide.destination && currentRide.destination.label ? currentRide.destination.label : ''}</p>\n        <button className=\"ride-detail__btn\" onClick={talkToUser}>{isDriver ? 'Talk to User' : 'Talk to Driver'}</button>\n        <button className=\"ride-detail__btn\" onClick={cancelRide}>Cancel the Ride</button>\n        {isDriver && <button className=\"ride-detail__btn\" onClick={finishRide}>Finish the Ride</button>}\n      </div>\n    </div>\n  );\n}\n\nexport default RideDetail;\n","// import useContext, useRef, useEffect, useCallback\nimport {useContext, useRef, useEffect, useCallback, useState} from 'react';\n// import custom components.\nimport Header from './Header';\nimport AddressPicker from './AddressPicker';\nimport RideList from './RideList';\nimport RideDetail from './RideDetail';\n// import Context\nimport Context from '../Context';\n// import leaflet\nimport L from \"leaflet\";\n\nrequire(\"leaflet-routing-machine\");\n\nconst style = {\n  width: \"100%\",\n  height: \"100vh\"\n};\n\nfunction Home() {\n  const [isLoading, setIsLoading] = useState(false);\n  // user state contains authenticated user.\n  const [user, setUser] = useState(null);\n  // comet chat.\n  const [cometChat, setCometChat] = useState(null);\n  // selected from, selected to.\n  const [selectedFrom, setSelectedFrom] = useState(null);\n  const [selectedTo, setSelectedTo] = useState(null);\n  // created ride request.\n  const [rideRequest, setRideRequest] = useState(null);\n  // current ride.\n  const [currentRide, setCurrentRide] = useState(null);\n\n\n  const map = useRef();\n  const routeControl = useRef();\n\n  useEffect(() => {\n    initMap();\n    initRouteControl();\n  }, []);\n\n  const drawRoute = useCallback((from, to) => {\n    if (shouldRouteDrawed(from, to) && routeControl && routeControl.current) {\n      const fromLatLng = new L.LatLng(from.y, from.x);\n      const toLatLng = new L.LatLng(to.y, to.x);\n      routeControl.current.setWaypoints([fromLatLng, toLatLng]);\n    }\n  }, []);\n\n  useEffect(() => {\n    if (shouldRouteDrawed(selectedFrom, selectedTo)) {\n      drawRoute(selectedFrom, selectedTo);\n    }\n  }, [selectedFrom, selectedTo, drawRoute]);\n\n  /**\n   * check a route should be drawed, or not.\n   * @param {*} selectedFrom \n   * @param {*} selectedTo \n   */\n  const shouldRouteDrawed = (selectedFrom, selectedTo) => {\n    return selectedFrom && selectedTo && selectedFrom.label &&\n    selectedTo.label && selectedFrom.x && selectedTo.x &&\n    selectedFrom.y && selectedTo.y;   \n  };\n\n  /**\n   * init leaflet map.\n   */\n  const initMap = () => {\n    map.current = L.map(\"map\", {\n      center: [38.8951, -77.0364],\n      zoom: 13,\n      layers: [\n        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n            attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n        })\n      ]\n    });\n  };\n\n  /**\n   * init route control.\n   */\n  const initRouteControl = () => {\n    routeControl.current = L.Routing.control({\n      show: true,\n      fitSelectedRoutes: true,\n      plan: false,\n      lineOptions: {\n        styles: [\n          {\n            color: \"blue\",\n            opacity: \"0.7\",\n            weight: 6\n          }\n        ]\n      },\n      router: L.Routing.mapbox(`${process.env.REACT_APP_MAP_BOX_API_KEY}`)\n    })\n      .addTo(map.current)\n      .getPlan();  \n  };\n\n  const renderSidebar = () => {\n    //const isUser = user && user.role === 'user';\n    const isUser = true;\n    if (isUser && !currentRide) {\n      return <AddressPicker />\n    } \n    if (isUser && currentRide) {\n      return <RideDetail user={currentRide.driver} isDriver={false} currentRide={currentRide} />\n    }\n    if (!isUser && !currentRide) {\n      return <RideList />\n    }\n    if (!isUser && currentRide) {\n      return <RideDetail user={currentRide.requestor} isDriver={true} currentRide={currentRide} />\n    }\n  }\n\n  return (\n      <Context.Provider value={{isLoading, setIsLoading, user, setUser, cometChat, selectedFrom, setSelectedFrom, selectedTo, setSelectedTo, rideRequest, setRideRequest, currentRide, setCurrentRide}}>\n    <>\n      <Header />\n      <div id=\"map\" style={style} />\n      {renderSidebar()}\n    </>\n</Context.Provider>\n  );\n}\n\nexport default Home;\n","import React from 'react'\nimport './App.css'\n\nimport { HashRouter as Router, Route, Switch } from 'react-router-dom'\n\nimport { createMuiTheme, ThemeProvider, responsiveFontSizes } from '@material-ui/core/styles'\nimport CssBaseline from '@material-ui/core/CssBaseline'\n\nimport AuthProvider, { AuthIsSignedIn, AuthIsNotSignedIn } from './contexts/authContext'\n\nimport SignIn from './routes/auth/signIn'\nimport SignUp from './routes/auth/signUp'\nimport VerifyCode from './routes/auth/verify'\nimport RequestCode from './routes/auth/requestCode'\nimport ForgotPassword from './routes/auth/forgotPassword'\nimport ChangePassword from './routes/auth/changePassword'\nimport Landing from './routes/landing'\n//import Home from './routes/home'\nimport Home from './routes/Home.js'\n\nlet lightTheme = createMuiTheme({\n  palette: {\n    type: 'light',\n  },\n})\nlightTheme = responsiveFontSizes(lightTheme)\n\n// let darkTheme = createMuiTheme({\n//   palette: {\n//     type: 'dark',\n//   },\n// })\n// darkTheme = responsiveFontSizes(darkTheme)\n\nconst SignInRoute: React.FunctionComponent = () => (\n  <Router>\n    <Switch>\n      <Route path=\"/signin\" component={SignIn} />\n      <Route path=\"/signup\" component={SignUp} />\n      <Route path=\"/verify\" component={VerifyCode} />\n      <Route path=\"/requestcode\" component={RequestCode} />\n      <Route path=\"/forgotpassword\" component={ForgotPassword} />\n      <Route path=\"/\" component={Landing} />\n    </Switch>\n  </Router>\n)\n\nconst MainRoute: React.FunctionComponent = () => (\n  <Router>\n    <Switch>\n      <Route path=\"/changepassword\" component={ChangePassword} />\n      <Route path=\"/\" component={Home} />\n    </Switch>\n  </Router>\n)\n\nconst App: React.FunctionComponent = () => (\n  <ThemeProvider theme={lightTheme}>\n    <CssBaseline />\n    <AuthProvider>\n      <AuthIsSignedIn>\n        <MainRoute />\n      </AuthIsSignedIn>\n      <AuthIsNotSignedIn>\n        <SignInRoute />\n      </AuthIsNotSignedIn>\n    </AuthProvider>\n  </ThemeProvider>\n)\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n//reportWebVitals(console.log)\n"],"sourceRoot":""}