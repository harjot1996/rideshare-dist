(this["webpackJsonpaws-cognito-react"]=this["webpackJsonpaws-cognito-react"]||[]).push([[0],{133:function(e,t,n){},134:function(e,t,n){},139:function(e,t){},253:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(13),s=n.n(a),i=(n(133),n(134),n(22)),o=n(16),u=n(121),l=n(293),d=n(288),j=n(289),h=n(4),b=n.n(h),p=n(9),O=n(6),f=n(35),m="us-east-2_pqRpxI09U",x="bv1mr5lto8ssdhhdcloldh7m6";console.log("userpool id=".concat(m)),console.log("client id=".concat(x));var v={UserPoolId:"".concat(m),ClientId:"".concat(x)},w=new f.d(v),g=w.getCurrentUser();function y(e){var t={Username:e,Pool:w};return new f.b(t)}function k(){return C.apply(this,arguments)}function C(){return(C=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g||(g=w.getCurrentUser()),e.abrupt("return",new Promise((function(e,t){g.getSession((function(n,r){n?t(n):e(r)}))})).catch((function(e){throw e})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t,n){return S.apply(this,arguments)}function S(){return(S=Object(p.a)(b.a.mark((function e(t,n,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,c){var a=[new f.c({Name:"email",Value:n}),new f.c({Name:"name",Value:"na"}),new f.c({Name:"preferred_username",Value:"na"})];w.signUp(t,r,a,[],(function(t,n){t?c(t):e(n)}))})).catch((function(e){throw e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t){return P.apply(this,arguments)}function P(){return(P=Object(p.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){y(t).confirmRegistration(n,!0,(function(t,n){t?r(t):e(n)}))})).catch((function(e){throw e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t){return V.apply(this,arguments)}function V(){return(V=Object(p.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var c={Username:t,Password:n},a=new f.a(c);(g=y(t)).authenticateUser(a,{onSuccess:function(t){e(t)},onFailure:function(e){r(e)}})})).catch((function(e){throw e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return U.apply(this,arguments)}function U(){return(U=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){g.getUserAttributes((function(n,r){n?t(n):e(r)}))})).catch((function(e){throw e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return F.apply(this,arguments)}function F(){return(F=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=[],c=new f.c(t);r.push(c),g.updateAttributes(r,(function(t,r){t?n(t):e(r)}))})).catch((function(e){throw e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return T.apply(this,arguments)}function T(){return(T=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=y(t);r?r.forgotPassword({onSuccess:function(t){e(t)},onFailure:function(e){n(e)}}):n("could not find ".concat(t))})).catch((function(e){throw e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e,t,n){return M.apply(this,arguments)}function M(){return(M=Object(p.a)(b.a.mark((function e(t,n,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,c){var a=y(t);a?a.confirmPassword(n,r,{onSuccess:function(){e("password updated")},onFailure:function(e){c(e)}}):c("could not find ".concat(t))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t){return D.apply(this,arguments)}function D(){return(D=Object(p.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){g.changePassword(t,n,(function(t,n){t?r(t):e(n)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W,A=n(1);!function(e){e[e.Loading=0]="Loading",e[e.SignedIn=1]="SignedIn",e[e.SignedOut=2]="SignedOut"}(W||(W={}));var J={sessionInfo:{},authStatus:W.Loading},Z=c.a.createContext(J),G=function(e){var t=e.children,n=Object(r.useContext)(Z).authStatus;return Object(A.jsx)(A.Fragment,{children:n===W.SignedIn?t:null})},z=function(e){var t=e.children,n=Object(r.useContext)(Z).authStatus;return Object(A.jsx)(A.Fragment,{children:n===W.SignedOut?t:null})},X=function(e){var t=e.children,n=Object(r.useState)(W.Loading),c=Object(O.a)(n,2),a=c[0],s=c[1],i=Object(r.useState)({}),o=Object(O.a)(i,2),u=o[0],l=o[1],d=Object(r.useState)([]),j=Object(O.a)(d,2),h=j[0],f=j[1];if(Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w();case 3:return t=e.sent,l({accessToken:t.accessToken.jwtToken,refreshToken:t.refreshToken.token}),window.localStorage.setItem("accessToken","".concat(t.accessToken.jwtToken)),window.localStorage.setItem("refreshToken","".concat(t.refreshToken.token)),e.next=9,P({Name:"website",Value:"https://github.com/dbroadhurst/aws-cognito-react"});case 9:return e.next=11,C();case 11:n=e.sent,f(n),s(W.SignedIn),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),s(W.SignedOut);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[s,a]),a===W.Loading)return null;function m(){return(m=Object(p.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N(t,n);case 3:s(W.SignedIn),e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),s(W.SignedOut),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function x(){return(x=Object(p.a)(b.a.mark((function e(t,n,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I(t,n,r);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),e.t0;case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function v(){return(v=Object(p.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_(t,n);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),e.t0;case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function w(){return y.apply(this,arguments)}function y(){return(y=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k();case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function C(){return S.apply(this,arguments)}function S(){return(S=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R();case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function P(e){return V.apply(this,arguments)}function V(){return(V=Object(p.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E(t);case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function U(){return(U=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q(t);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),e.t0;case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function F(){return(F=Object(p.a)(b.a.mark((function e(t,n,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L(t,n,r);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),e.t0;case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function T(){return(T=Object(p.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B(t,n);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),e.t0;case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}var M={authStatus:a,sessionInfo:u,attrInfo:h,signUpWithEmail:function(e,t,n){return x.apply(this,arguments)},signInWithEmail:function(e,t){return m.apply(this,arguments)},signOut:function(){g&&g.signOut(),s(W.SignedOut)},verifyCode:function(e,t){return v.apply(this,arguments)},getSession:w,sendCode:function(e){return U.apply(this,arguments)},forgotPassword:function(e,t,n){return F.apply(this,arguments)},changePassword:function(e,t){return T.apply(this,arguments)},getAttributes:C,setAttribute:P};return Object(A.jsx)(Z.Provider,{value:M,children:t})},Y=n(285),H=n(291),Q=n(286),K=n(292),$=n(287),ee=n(284),te=n(30),ne=function(e){var t=Object(r.useState)(e),n=Object(O.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(!0),i=Object(O.a)(s,2),o=i[0],u=i[1];return Object(r.useEffect)((function(){var e=te.a().shape({password:te.b().min(8).required()});if(0!==c.length){var t=e.isValidSync({password:c});u(t)}else u(!0)}),[c]),{password:c,setPassword:a,passwordIsValid:o}},re=function(e){var t=Object(r.useState)(e),n=Object(O.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(!0),i=Object(O.a)(s,2),o=i[0],u=i[1];return Object(r.useEffect)((function(){var e=te.a().shape({username:te.b().min(8).required()});if(0!==c.length){var t=e.isValidSync({username:c});u(t)}else u(!0)}),[c]),{username:c,setUsername:a,usernameIsValid:o}},ce=function(e){var t=Object(r.useState)(e),n=Object(O.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(!0),i=Object(O.a)(s,2),o=i[0],u=i[1];return Object(r.useEffect)((function(){var e=te.a().shape({code:te.b().min(6).required()});if(0!==c.length){var t=e.isValidSync({code:c});u(t)}else u(!0)}),[c]),{code:c,setCode:a,codeIsValid:o}},ae=n(290),se=function(e){var t=e.emailIsValid,n=e.setEmail;return Object(A.jsx)(ae.a,{fullWidth:!0,variant:"outlined",label:t?"Email":"Invalid Email",error:!t,onChange:function(e){n(e.target.value)}})},ie=function(e){var t=e.label,n=e.passwordIsValid,r=e.setPassword;return Object(A.jsx)(ae.a,{fullWidth:!0,variant:"outlined",label:n?t:"Minimum 8 characters",error:!n,onChange:function(e){r(e.target.value)}})},oe=function(e){var t=e.usernameIsValid,n=e.setUsername;return Object(A.jsx)(ae.a,{fullWidth:!0,variant:"outlined",label:t?"Username":"Minimum 8 characters",error:!t,onChange:function(e){n(e.target.value)}})},ue=function(e){var t=e.codeIsValid,n=e.setCode;return Object(A.jsx)(ae.a,{fullWidth:!0,variant:"outlined",label:t?"Code":"Minimum 6 characters",error:!t,onChange:function(e){n(e.target.value)}})},le=Object(Y.a)({root:{height:"100vh"},hover:{"&:hover":{cursor:"pointer"}}}),de=function(){var e=le(),t=re(""),n=t.username,c=t.setUsername,a=t.usernameIsValid,s=ne(""),i=s.password,u=s.setPassword,l=s.passwordIsValid,d=Object(r.useState)(""),j=Object(O.a)(d,2),h=j[0],f=j[1],m=!a||0===n.length||!l||0===i.length,x=Object(o.f)(),v=Object(r.useContext)(Z),w=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.signInWithEmail(n,i);case 3:x.push("home"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),"UserNotConfirmedException"===e.t0.code?x.push("verify"):f(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.push("requestcode");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(A.jsx)(Q.a,{className:e.root,container:!0,direction:"row",justify:"center",alignItems:"center",children:Object(A.jsx)(Q.a,{xs:11,sm:6,lg:4,container:!0,direction:"row",justify:"center",alignItems:"center",item:!0,children:Object(A.jsx)(ee.a,{style:{width:"100%",padding:32},children:Object(A.jsxs)(Q.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(A.jsx)(H.a,{m:2,children:Object(A.jsx)($.a,{variant:"h3",children:"Sign in"})}),Object(A.jsxs)(H.a,{width:"80%",m:1,children:[Object(A.jsx)(oe,{usernameIsValid:a,setUsername:c})," "]}),Object(A.jsxs)(H.a,{width:"80%",m:1,children:[Object(A.jsx)(ie,{label:"Password",passwordIsValid:l,setPassword:u}),Object(A.jsx)(Q.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:Object(A.jsx)(H.a,{onClick:g,mt:2,children:Object(A.jsx)($.a,{className:e.hover,variant:"body2",children:"Forgot Password?"})})})]}),Object(A.jsx)(H.a,{mt:2,children:Object(A.jsx)($.a,{color:"error",variant:"body2",children:h})}),Object(A.jsx)(H.a,{mt:2,children:Object(A.jsxs)(Q.a,{container:!0,direction:"row",justify:"center",children:[Object(A.jsx)(H.a,{m:1,children:Object(A.jsx)(K.a,{color:"secondary",variant:"contained",onClick:function(){return x.goBack()},children:"Cancel"})}),Object(A.jsx)(H.a,{m:1,children:Object(A.jsx)(K.a,{disabled:m,color:"primary",variant:"contained",onClick:w,children:"Sign In"})})]})}),Object(A.jsx)(H.a,{mt:2,children:Object(A.jsx)(H.a,{onClick:function(){return x.push("signup")},children:Object(A.jsx)($.a,{className:e.hover,variant:"body1",children:"Register a new account"})})})]})})})})},je=Object(Y.a)({root:{height:"100vh"}}),he=function(){var e=je(),t=function(e){var t=Object(r.useState)(e),n=Object(O.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(!0),i=Object(O.a)(s,2),o=i[0],u=i[1];return Object(r.useEffect)((function(){var e=te.a().shape({email:te.b().email().required()});if(0!==c.length){var t=e.isValidSync({email:c});u(t)}else u(!0)}),[c]),{email:c,setEmail:a,emailIsValid:o}}(""),n=t.email,c=t.setEmail,a=t.emailIsValid,s=ne(""),i=s.password,u=s.setPassword,l=s.passwordIsValid,d=re(""),j=d.username,h=d.setUsername,f=d.usernameIsValid,m=Object(r.useState)(""),x=Object(O.a)(m,2),v=x[0],w=x[1],g=Object(r.useState)(!1),y=Object(O.a)(g,2),k=y[0],C=y[1],I=ne(""),S=I.password,_=I.setPassword,P=I.passwordIsValid,N=!a||0===n.length||!f||0===j.length||!l||0===i.length||!P||0===S.length,V=Object(o.f)(),R=Object(r.useContext)(Z),U=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.signUpWithEmail(j,n,i);case 3:C(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),e.t0 instanceof Error&&w(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),E=Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(H.a,{width:"80%",m:1,children:Object(A.jsx)(se,{emailIsValid:a,setEmail:c})}),Object(A.jsx)(H.a,{width:"80%",m:1,children:Object(A.jsx)(oe,{usernameIsValid:f,setUsername:h})}),Object(A.jsx)(H.a,{width:"80%",m:1,children:Object(A.jsx)(ie,{label:"Password",passwordIsValid:l,setPassword:u})}),Object(A.jsx)(H.a,{width:"80%",m:1,children:Object(A.jsx)(ie,{label:"Confirm Password",passwordIsValid:P,setPassword:_})}),Object(A.jsx)(H.a,{mt:2,children:Object(A.jsx)($.a,{color:"error",variant:"body2",children:v})}),Object(A.jsx)(H.a,{mt:2,children:Object(A.jsxs)(Q.a,{container:!0,direction:"row",justify:"center",children:[Object(A.jsx)(H.a,{m:1,children:Object(A.jsx)(K.a,{onClick:function(){return V.goBack()},color:"secondary",variant:"contained",children:"Cancel"})}),Object(A.jsx)(H.a,{m:1,children:Object(A.jsx)(K.a,{disabled:N,color:"primary",variant:"contained",onClick:U,children:"Sign Up"})})]})})]}),F=Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)($.a,{variant:"h5",children:"Created ".concat(j," account")}),Object(A.jsx)($.a,{variant:"h6",children:"Verfiy Code sent to ".concat(n)}),Object(A.jsx)(H.a,{m:4,children:Object(A.jsx)(K.a,{onClick:function(){return V.push("/verify")},color:"primary",variant:"contained",children:"Send Code"})})]});return Object(A.jsx)(Q.a,{className:e.root,container:!0,direction:"row",justify:"center",alignItems:"center",children:Object(A.jsx)(Q.a,{xs:11,sm:6,lg:4,container:!0,direction:"row",justify:"center",alignItems:"center",item:!0,children:Object(A.jsx)(ee.a,{style:{width:"100%",padding:16},children:Object(A.jsxs)(Q.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(A.jsx)(H.a,{m:3,children:Object(A.jsx)(Q.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:Object(A.jsx)($.a,{variant:"h3",children:"Sign Up"})})}),k?F:E]})})})})},be=Object(Y.a)({root:{height:"100vh"},hover:{"&:hover":{cursor:"pointer"}}}),pe=function(){var e=be(),t=re(""),n=t.username,c=t.setUsername,a=t.usernameIsValid,s=ce(""),i=s.code,u=s.setCode,l=s.codeIsValid,d=Object(r.useState)(""),j=Object(O.a)(d,2),h=j[0],f=j[1],m=!a||0===n.length||!l||0===i.length,x=Object(o.f)(),v=Object(r.useContext)(Z),w=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.verifyCode(n,i);case 3:x.push("signin"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),f("Invalid Code");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.push("/resetpassword");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(A.jsx)(Q.a,{className:e.root,container:!0,direction:"row",justify:"center",alignItems:"center",children:Object(A.jsx)(Q.a,{xs:11,sm:6,lg:4,container:!0,direction:"row",justify:"center",alignItems:"center",item:!0,children:Object(A.jsx)(ee.a,{style:{width:"100%",padding:32},children:Object(A.jsxs)(Q.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(A.jsx)(H.a,{m:2,children:Object(A.jsx)($.a,{variant:"h3",children:"Send Code"})}),Object(A.jsxs)(H.a,{width:"80%",m:1,children:[Object(A.jsx)(oe,{usernameIsValid:a,setUsername:c})," "]}),Object(A.jsxs)(H.a,{width:"80%",m:1,children:[Object(A.jsx)(ue,{codeIsValid:l,setCode:u}),Object(A.jsx)(Q.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:Object(A.jsxs)(H.a,{onClick:g,mt:2,children:[Object(A.jsx)($.a,{className:e.hover,variant:"body2",children:"Resend Code"}),Object(A.jsx)(H.a,{mt:2,children:Object(A.jsx)($.a,{color:"error",variant:"body2",children:h})})]})})]}),Object(A.jsx)(H.a,{mt:2,children:Object(A.jsxs)(Q.a,{container:!0,direction:"row",justify:"center",children:[Object(A.jsx)(H.a,{m:1,children:Object(A.jsx)(K.a,{color:"secondary",variant:"contained",onClick:function(){return x.goBack()},children:"Cancel"})}),Object(A.jsx)(H.a,{m:1,children:Object(A.jsx)(K.a,{disabled:m,color:"primary",variant:"contained",onClick:w,children:"Send"})})]})})]})})})})},Oe=Object(Y.a)({root:{height:"100vh"},hover:{"&:hover":{cursor:"pointer"}},text:{textAlign:"center"}});function fe(){var e=Oe(),t=re(""),n=t.username,c=t.setUsername,a=t.usernameIsValid,s=Object(r.useState)(""),i=Object(O.a)(s,2),u=i[0],l=i[1],d=Object(r.useState)(!1),j=Object(O.a)(d,2),h=j[0],f=j[1],m=!a||0===n.length,x=Object(o.f)(),v=Object(r.useContext)(Z),w=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.sendCode(n);case 3:f(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),l("Unknown user");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),g=Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(H.a,{mt:1,children:Object(A.jsx)($.a,{className:e.text,variant:"h5",children:"Reset Code Sent to ".concat(n)})}),Object(A.jsx)(H.a,{mt:4,children:Object(A.jsx)(K.a,{onClick:function(){return x.push("forgotpassword")},color:"primary",variant:"contained",children:"Reset Password"})})]}),y=Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(H.a,{width:"80%",m:1,children:Object(A.jsx)(oe,{usernameIsValid:a,setUsername:c})}),Object(A.jsx)(H.a,{mt:2,children:Object(A.jsx)($.a,{color:"error",variant:"body2",children:u})}),Object(A.jsx)(H.a,{mt:2,children:Object(A.jsxs)(Q.a,{container:!0,direction:"row",justify:"center",children:[Object(A.jsx)(H.a,{m:1,children:Object(A.jsx)(K.a,{color:"secondary",variant:"contained",onClick:function(){return x.goBack()},children:"Cancel"})}),Object(A.jsx)(H.a,{m:1,children:Object(A.jsx)(K.a,{disabled:m,color:"primary",variant:"contained",onClick:w,children:"Send Code"})})]})})]});return Object(A.jsx)(Q.a,{className:e.root,container:!0,direction:"row",justify:"center",alignItems:"center",children:Object(A.jsx)(Q.a,{xs:11,sm:6,lg:4,container:!0,direction:"row",justify:"center",alignItems:"center",item:!0,children:Object(A.jsx)(ee.a,{style:{width:"100%",padding:32},children:Object(A.jsxs)(Q.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(A.jsx)(H.a,{m:2,children:Object(A.jsx)($.a,{variant:"h3",children:"Send Reset Code"})}),h?g:y]})})})})}var me=Object(Y.a)({root:{height:"100vh"}});function xe(){var e=me(),t=ce(""),n=t.code,c=t.setCode,a=t.codeIsValid,s=ne(""),i=s.password,u=s.setPassword,l=s.passwordIsValid,d=re(""),j=d.username,h=d.setUsername,f=d.usernameIsValid,m=Object(r.useState)(""),x=Object(O.a)(m,2),v=x[0],w=x[1],g=Object(r.useState)(!1),y=Object(O.a)(g,2),k=y[0],C=y[1],I=ne(""),S=I.password,_=I.setPassword,P=I.passwordIsValid,N=!a||0===n.length||!f||0===j.length||!l||0===i.length||!P||0===S.length,V=Object(o.f)(),R=Object(r.useContext)(Z),U=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.forgotPassword(j,n,i);case 3:C(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),e.t0 instanceof Error&&w(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),E=Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(H.a,{width:"80%",m:1,children:Object(A.jsx)(ue,{codeIsValid:a,setCode:c})}),Object(A.jsx)(H.a,{width:"80%",m:1,children:Object(A.jsx)(oe,{usernameIsValid:f,setUsername:h})}),Object(A.jsx)(H.a,{width:"80%",m:1,children:Object(A.jsx)(ie,{label:"Password",passwordIsValid:l,setPassword:u})}),Object(A.jsx)(H.a,{width:"80%",m:1,children:Object(A.jsx)(ie,{label:"Confirm Password",passwordIsValid:P,setPassword:_})}),Object(A.jsx)(H.a,{mt:2,children:Object(A.jsx)($.a,{color:"error",variant:"body2",children:v})}),Object(A.jsx)(H.a,{mt:2,children:Object(A.jsxs)(Q.a,{container:!0,direction:"row",justify:"center",children:[Object(A.jsx)(H.a,{m:1,children:Object(A.jsx)(K.a,{onClick:function(){return V.goBack()},color:"secondary",variant:"contained",children:"Cancel"})}),Object(A.jsx)(H.a,{m:1,children:Object(A.jsx)(K.a,{disabled:N,color:"primary",variant:"contained",onClick:U,children:"Change Password"})})]})})]}),F=Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)($.a,{variant:"h5",children:"Password Reset"}),Object(A.jsx)(H.a,{m:4,children:Object(A.jsx)(K.a,{onClick:function(){return V.push("/signin")},color:"primary",variant:"contained",children:"Sign In"})})]});return Object(A.jsx)(Q.a,{className:e.root,container:!0,direction:"row",justify:"center",alignItems:"center",children:Object(A.jsx)(Q.a,{xs:11,sm:6,lg:4,container:!0,direction:"row",justify:"center",alignItems:"center",item:!0,children:Object(A.jsx)(ee.a,{style:{width:"100%",padding:16},children:Object(A.jsxs)(Q.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(A.jsx)(H.a,{m:3,children:Object(A.jsx)(Q.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:Object(A.jsx)($.a,{variant:"h3",children:"Forgot Password"})})}),k?F:E]})})})})}var ve=Object(Y.a)({root:{height:"100vh"}});function we(){var e=ve(),t=Object(r.useState)(""),n=Object(O.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)(!1),i=Object(O.a)(s,2),u=i[0],l=i[1],d=ne(""),j=d.password,h=d.setPassword,f=d.passwordIsValid,m=ne(""),x=m.password,v=m.setPassword,w=m.passwordIsValid,g=!f||0===j.length||!w||0===x.length,y=Object(o.f)(),k=Object(r.useContext)(Z),C=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.changePassword(j,x);case 3:l(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.signOut();case 3:y.push("/"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),e.t0 instanceof Error&&a(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),S=Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(H.a,{width:"80%",m:1,children:Object(A.jsx)(ie,{label:"Old Password",passwordIsValid:f,setPassword:h})}),Object(A.jsx)(H.a,{width:"80%",m:1,children:Object(A.jsx)(ie,{label:"Password",passwordIsValid:w,setPassword:v})}),Object(A.jsx)(H.a,{mt:2,children:Object(A.jsx)($.a,{color:"error",variant:"body2",children:c})}),Object(A.jsx)(H.a,{mt:2,children:Object(A.jsxs)(Q.a,{container:!0,direction:"row",justify:"center",children:[Object(A.jsx)(H.a,{m:1,children:Object(A.jsx)(K.a,{onClick:function(){return y.goBack()},color:"secondary",variant:"contained",children:"Cancel"})}),Object(A.jsx)(H.a,{m:1,children:Object(A.jsx)(K.a,{disabled:g,color:"primary",variant:"contained",onClick:C,children:"Change Password"})})]})})]}),_=Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)($.a,{variant:"h5",children:"Password Changed"}),Object(A.jsx)(H.a,{m:4,children:Object(A.jsx)(K.a,{onClick:I,color:"primary",variant:"contained",children:"Sign In"})})]});return Object(A.jsx)(Q.a,{className:e.root,container:!0,direction:"row",justify:"center",alignItems:"center",children:Object(A.jsx)(Q.a,{xs:11,sm:6,lg:4,container:!0,direction:"row",justify:"center",alignItems:"center",item:!0,children:Object(A.jsx)(ee.a,{style:{width:"100%",padding:16},children:Object(A.jsxs)(Q.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(A.jsx)(H.a,{m:3,children:Object(A.jsx)(Q.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:Object(A.jsx)($.a,{variant:"h3",children:"Change Password"})})}),u?_:S]})})})})}var ge=Object(Y.a)((function(e){return{root:{height:"100vh"},title:{textAlign:"center"}}})),ye=function(){var e=ge(),t=Object(o.f)();return Object(A.jsx)(Q.a,{container:!0,children:Object(A.jsxs)(Q.a,{className:e.root,container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(A.jsx)(H.a,{m:2,children:Object(A.jsx)("img",{src:"./logomain.png",width:224,height:224,alt:"logo"})}),Object(A.jsx)(H.a,{m:2,children:Object(A.jsx)(Q.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:Object(A.jsx)($.a,{className:e.title,variant:"h3",children:"Ride Share"})})}),Object(A.jsx)(H.a,{m:2,children:Object(A.jsx)(K.a,{onClick:function(){t.push("/signin")},variant:"contained",color:"primary",children:"SIGN IN"})})]})})},ke=c.a.createContext(null);var Ce=function(){var e=Object(r.useContext)(ke),t=e.user,n=e.setUser,c=Object(o.f)();return Object(A.jsxs)("div",{className:"header",children:[Object(A.jsxs)("div",{className:"header__left",children:[Object(A.jsx)("img",{src:"./logomain.png",alt:"Uber Clone"}),t&&Object(A.jsxs)("div",{className:"header__right",children:[Object(A.jsx)("img",{src:t.avatar,alt:t.email}),Object(A.jsxs)("span",{children:["Hello, ",t.email]})]})]}),Object(A.jsx)("span",{className:"header__logout",onClick:function(){window.confirm("Do you want to log out ?")&&(localStorage.removeItem("auth"),n(null),c.push("/login"))},children:Object(A.jsx)("span",{children:"Logout"})})]})},Ie=n(86),Se=function(e){return function(t){return function(){var n=Object(r.useState)(!1),c=Object(O.a)(n,2),a=c[0],s=c[1];return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(t,{toggleModal:s}),a&&Object(A.jsx)(e,{toggleModal:s})]})}}},_e=n(120);var Pe=Se((function(e){var t=e.toggleModal,n=Object(r.useContext)(ke),c=n.user,a=n.selectedFrom,s=n.selectedTo,i=(n.setRideRequest,n.setIsLoading);return Object(A.jsx)("div",{className:"request-ride",children:Object(A.jsxs)("div",{className:"request-ride__content",children:[Object(A.jsxs)("div",{className:"request-ride__container",children:[Object(A.jsx)("div",{className:"request-ride__title",children:"Requesting a Ride"}),Object(A.jsx)("div",{className:"request-ride__close",children:Object(A.jsx)("img",{alt:"close",onClick:function(){return t(!1)},src:"https://static.xx.fbcdn.net/rsrc.php/v3/y2/r/__geKiQnSG-.png"})})]}),Object(A.jsx)("div",{className:"request-ride__subtitle"}),Object(A.jsxs)("div",{className:"request-ride__form",children:[Object(A.jsx)("p",{children:"You entered the pickup location successfully. Do you want to request a ride now ?"}),Object(A.jsx)("button",{className:"request-ride__btn request-ride__change-btn",onClick:function(){return t(!1)},children:"Change"}),Object(A.jsx)("button",{className:"request-ride__btn",onClick:function(){if(c&&a&&s){t(!1),i(!0);Object(_e.v4)()}},children:"Requesting a ride now"})]})]})})}))((function(e){var t=Object(r.useState)(!0),n=Object(O.a)(t,2),c=n[0],a=n[1],s=Object(r.useState)([]),i=Object(O.a)(s,2),o=i[0],u=i[1],l=Object(r.useContext)(ke),d=l.selectedFrom,j=l.setSelectedFrom,h=l.selectedTo,b=l.setSelectedTo,p=Object(r.useRef)(),f=Object(r.useRef)(),m=e.toggleModal;Object(r.useEffect)((function(){v()}),[]);var x=Object(r.useCallback)((function(){d&&h&&m(!0)}),[d,h,m]);Object(r.useEffect)((function(){d&&h&&x()}),[d,h,x]);var v=function(){p.current=new Ie.a({params:{key:"AIzaSyDW6k2gwu9L-SPyuFEDSHBPX4xtpEYrrLQ"}}),new Ie.b({params:{"accept-language":"en",countrycodes:"us"}})};return Object(A.jsx)(ke.Provider,{value:{selectedFrom:d,setSelectedFrom:j,selectedTo:h,setSelectedTo:b},children:Object(A.jsxs)("div",{className:"address",children:[Object(A.jsx)("div",{className:"address__title",children:Object(A.jsxs)("div",{className:"address__title-container",children:[Object(A.jsx)("p",{className:"address__title-from",onClick:function(){return a(!0)},children:d&&d.label?d.label:"Pickup location ?"}),Object(A.jsx)("p",{className:"address__title-to",onClick:function(){return a(!1)},children:h&&h.label?h.label:"Destination ?"})]})}),Object(A.jsxs)("div",{className:"search",children:[Object(A.jsx)("input",{className:"search__input",type:"text",placeholder:c?"Add a pickup location":"Enter your destination",onChange:function(e){var t=e.target.value;p.current.search({query:t}).then((function(e){u((function(){return e}))}))},ref:f}),Object(A.jsx)("div",{className:"search__result",children:o&&0!==o.length&&o.map((function(e,t){return Object(A.jsxs)("div",{className:"search__result-item",onClick:function(){var t;(t=e)&&t.label&&t.x&&t.y&&(c?(console.log(t),j((function(){return t})),a((function(){return!1}))):(b((function(){return t})),a((function(){return!0}))),u((function(){return[]})),f.current.value="")},children:[Object(A.jsx)("div",{className:"search__result-icon",children:Object(A.jsx)("svg",{title:"LocationMarkerFilled",viewBox:"0 0 24 24",className:"g2 ec db",children:Object(A.jsx)("g",{transform:"matrix( 1 0 0 1 2.524993896484375 1.0250244140625 )",children:Object(A.jsx)("path",{fillRule:"nonzero",clipRule:"nonzero",d:"M16.175 2.775C12.475 -0.925 6.475 -0.925 2.775 2.775C-0.925 6.475 -0.925 12.575 2.775 16.275L9.475 22.975L16.175 16.175C19.875 12.575 19.875 6.475 16.175 2.775ZM9.475 11.475C8.375 11.475 7.475 10.575 7.475 9.475C7.475 8.375 8.375 7.475 9.475 7.475C10.575 7.475 11.475 8.375 11.475 9.475C11.475 10.575 10.575 11.475 9.475 11.475Z",opacity:"1"})})})}),Object(A.jsx)("p",{className:"search__result-label",children:e.label})]},t)}))})]})]})})}));var Ne=function(e){var t=e.user,n=e.isDriver,c=e.currentRide,a=Object(r.useContext)(ke),s=(a.setCurrentRide,a.setIsLoading),i=Object(o.f)(),u=function(e){s(!0)};return Object(A.jsxs)("div",{className:"ride-detail",children:[Object(A.jsx)("div",{className:"ride-detail__user-avatar",children:Object(A.jsx)("img",{src:t.avatar,alt:t.email})}),Object(A.jsxs)("p",{className:"ride-detail__user-info",children:[t.email," - ",t.phone]}),Object(A.jsxs)("div",{className:"ride-detail__actions",children:[Object(A.jsxs)("p",{className:"ride-detail__result-label",children:[Object(A.jsx)("span",{children:"From: "}),c.pickup&&c.pickup.label?c.pickup.label:""]}),Object(A.jsxs)("p",{className:"ride-detail__result-label",children:[Object(A.jsx)("span",{children:"To: "}),c.destination&&c.destination.label?c.destination.label:""]}),Object(A.jsx)("button",{className:"ride-detail__btn",onClick:function(){i.push("/chat")},children:n?"Talk to User":"Talk to Driver"}),Object(A.jsx)("button",{className:"ride-detail__btn",onClick:function(){window.confirm("Do you want to cancel this ride?")&&(c.status=-1,u())},children:"Cancel the Ride"}),n&&Object(A.jsx)("button",{className:"ride-detail__btn",onClick:function(){window.confirm("Do you want to finish this ride?")&&(c.status=2,u())},children:"Finish the Ride"})]})]})},Ve=n(15),Re=n.n(Ve);n(251);var Ue={width:"100%",height:"100vh"};var Ee=function(){var e=Object(r.useState)(!1),t=Object(O.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(null),s=Object(O.a)(a,2),i=s[0],o=s[1],u=Object(r.useState)(null),l=Object(O.a)(u,2),d=l[0],j=(l[1],Object(r.useState)(null)),h=Object(O.a)(j,2),b=h[0],p=h[1],f=Object(r.useState)(null),m=Object(O.a)(f,2),x=m[0],v=m[1],w=Object(r.useState)(null),g=Object(O.a)(w,2),y=g[0],k=g[1],C=Object(r.useState)(null),I=Object(O.a)(C,2),S=I[0],_=I[1],P=Object(r.useRef)(),N=Object(r.useRef)();Object(r.useEffect)((function(){U(),E()}),[]);var V=Object(r.useCallback)((function(e,t){if(R(e,t)&&N&&N.current){var n=new Re.a.LatLng(e.y,e.x),r=new Re.a.LatLng(t.y,t.x);N.current.setWaypoints([n,r])}}),[]);Object(r.useEffect)((function(){R(b,x)&&V(b,x)}),[b,x,V]);var R=function(e,t){return e&&t&&e.label&&t.label&&e.x&&t.x&&e.y&&t.y},U=function(){P.current=Re.a.map("map",{center:[38.8951,-77.0364],zoom:13,layers:[Re.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'})]})},E=function(){N.current=Re.a.Routing.control({show:!0,fitSelectedRoutes:!0,plan:!1,lineOptions:{styles:[{color:"blue",opacity:"0.7",weight:6}]},router:Re.a.Routing.mapbox("".concat("pk.eyJ1IjoiY2NiZHNoYXJlZG1haWwiLCJhIjoiY2t3cXhrdGZxMDB3cjJ2bXlnenM1aTB2ZiJ9.NbHc2rGjEjZubapVXnGJ9g"))}).addTo(P.current).getPlan()};return Object(A.jsx)(ke.Provider,{value:{isLoading:n,setIsLoading:c,user:i,setUser:o,cometChat:d,selectedFrom:b,setSelectedFrom:p,selectedTo:x,setSelectedTo:v,rideRequest:y,setRideRequest:k,currentRide:S,setCurrentRide:_},children:Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(Ce,{}),Object(A.jsx)("div",{id:"map",style:Ue}),S?S?Object(A.jsx)(Ne,{user:S.driver,isDriver:!1,currentRide:S}):void 0:Object(A.jsx)(Pe,{})]})})},Fe=Object(u.a)({palette:{type:"light"}});Fe=Object(l.a)(Fe);var qe=function(){return Object(A.jsx)(i.a,{children:Object(A.jsxs)(o.c,{children:[Object(A.jsx)(o.a,{path:"/signin",component:de}),Object(A.jsx)(o.a,{path:"/signup",component:he}),Object(A.jsx)(o.a,{path:"/verify",component:pe}),Object(A.jsx)(o.a,{path:"/requestcode",component:fe}),Object(A.jsx)(o.a,{path:"/forgotpassword",component:xe}),Object(A.jsx)(o.a,{path:"/",component:ye})]})})},Te=function(){return Object(A.jsx)(i.a,{children:Object(A.jsxs)(o.c,{children:[Object(A.jsx)(o.a,{path:"/changepassword",component:we}),Object(A.jsx)(o.a,{path:"/",component:Ee})]})})},Le=function(){return Object(A.jsxs)(d.a,{theme:Fe,children:[Object(A.jsx)(j.a,{}),Object(A.jsxs)(X,{children:[Object(A.jsx)(G,{children:Object(A.jsx)(Te,{})}),Object(A.jsx)(z,{children:Object(A.jsx)(qe,{})})]})]})};s.a.render(Object(A.jsx)(c.a.StrictMode,{children:Object(A.jsx)(Le,{})}),document.getElementById("root"))}},[[253,1,2]]]);
//# sourceMappingURL=main.dfb8f617.chunk.js.map