(this["webpackJsonpaws-cognito-react"]=this["webpackJsonpaws-cognito-react"]||[]).push([[0],{282:function(e,t,n){},283:function(e,t,n){},288:function(e,t){},505:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(20),s=n.n(c),i=(n(282),n(283),n(33)),o=n(26),l=n(264),u=n(578),j=n(568),d=n(569),h=n(6),b=n.n(h),p=n(10),f=n(4),O=n(74),x="us-east-2_pqRpxI09U",g="bv1mr5lto8ssdhhdcloldh7m6";console.log("userpool id=".concat(x)),console.log("client id=".concat(g));var m={UserPoolId:"".concat(x),ClientId:"".concat(g)},v=new O.d(m),w=v.getCurrentUser();function y(e){var t={Username:e,Pool:v};return new O.b(t)}function S(){return I.apply(this,arguments)}function I(){return(I=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w||(w=v.getCurrentUser()),e.abrupt("return",new Promise((function(e,t){w.getSession((function(n,r){n?t(n):e(r)}))})).catch((function(e){throw e})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t,n){return C.apply(this,arguments)}function C(){return(C=Object(p.a)(b.a.mark((function e(t,n,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){var c=[new O.c({Name:"email",Value:n}),new O.c({Name:"name",Value:"na"}),new O.c({Name:"preferred_username",Value:"na"})];v.signUp(t,r,c,[],(function(t,n){t?a(t):e(n)}))})).catch((function(e){throw e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){return _.apply(this,arguments)}function _(){return(_=Object(p.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){y(t).confirmRegistration(n,!0,(function(t,n){t?r(t):e(n)}))})).catch((function(e){throw e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t){return V.apply(this,arguments)}function V(){return(V=Object(p.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var a={Username:t,Password:n},c=new O.a(a);(w=y(t)).authenticateUser(c,{onSuccess:function(t){e(t)},onFailure:function(e){r(e)}})})).catch((function(e){throw e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(){return E.apply(this,arguments)}function E(){return(E=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){w.getUserAttributes((function(n,r){n?t(n):e(r)}))})).catch((function(e){throw e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return T.apply(this,arguments)}function T(){return(T=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=[],a=new O.c(t);r.push(a),w.updateAttributes(r,(function(t,r){t?n(t):e(r)}))})).catch((function(e){throw e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return U.apply(this,arguments)}function U(){return(U=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=y(t);r?r.forgotPassword({onSuccess:function(t){e(t)},onFailure:function(e){n(e)}}):n("could not find ".concat(t))})).catch((function(e){throw e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t,n){return z.apply(this,arguments)}function z(){return(z=Object(p.a)(b.a.mark((function e(t,n,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,a){var c=y(t);c?c.confirmPassword(n,r,{onSuccess:function(){e("password updated")},onFailure:function(e){a(e)}}):a("could not find ".concat(t))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,t){return A.apply(this,arguments)}function A(){return(A=Object(p.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){w.changePassword(t,n,(function(t,n){t?r(t):e(n)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q,B=n(1);!function(e){e[e.Loading=0]="Loading",e[e.SignedIn=1]="SignedIn",e[e.SignedOut=2]="SignedOut"}(q||(q={}));var J={sessionInfo:{},authStatus:q.Loading},D=a.a.createContext(J),G=function(e){var t=e.children,n=Object(r.useContext)(D).authStatus;return Object(B.jsx)(B.Fragment,{children:n===q.SignedIn?t:null})},Y=function(e){var t=e.children,n=Object(r.useContext)(D).authStatus;return Object(B.jsx)(B.Fragment,{children:n===q.SignedOut?t:null})},Z=function(e){var t=e.children,n=Object(r.useState)(q.Loading),a=Object(f.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)({}),o=Object(f.a)(i,2),l=o[0],u=o[1],j=Object(r.useState)([]),d=Object(f.a)(j,2),h=d[0],O=d[1];if(Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v();case 3:return t=e.sent,u({accessToken:t.accessToken.jwtToken,refreshToken:t.refreshToken.token}),window.localStorage.setItem("accessToken","".concat(t.accessToken.jwtToken)),window.localStorage.setItem("refreshToken","".concat(t.refreshToken.token)),e.next=9,_({Name:"website",Value:"https://github.com/dbroadhurst/aws-cognito-react"});case 9:return e.next=11,I();case 11:n=e.sent,O(n),s(q.SignedIn),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),s(q.SignedOut);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[s,c]),c===q.Loading)return null;function x(){return(x=Object(p.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N(t,n);case 3:s(q.SignedIn),localStorage.setItem("rs_share_user",t),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),s(q.SignedOut),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function g(){return(g=Object(p.a)(b.a.mark((function e(t,n,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k(t,n,r);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),e.t0;case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function m(){return(m=Object(p.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P(t,n);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),e.t0;case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function v(){return y.apply(this,arguments)}function y(){return(y=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S();case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function I(){return C.apply(this,arguments)}function C(){return(C=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F();case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function _(e){return V.apply(this,arguments)}function V(){return(V=Object(p.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M(t);case 3:return n=e.sent,e.abrupt("return",n);case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function E(){return(E=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L(t);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),e.t0;case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function T(){return(T=Object(p.a)(b.a.mark((function e(t,n,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R(t,n,r);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),e.t0;case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function U(){return(U=Object(p.a)(b.a.mark((function e(t,n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W(t,n);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),e.t0;case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}var z={authStatus:c,sessionInfo:l,attrInfo:h,signUpWithEmail:function(e,t,n){return g.apply(this,arguments)},signInWithEmail:function(e,t){return x.apply(this,arguments)},signOut:function(){localStorage.setItem("rs_share_user","signed_out"),w&&w.signOut(),s(q.SignedOut)},verifyCode:function(e,t){return m.apply(this,arguments)},getSession:v,sendCode:function(e){return E.apply(this,arguments)},forgotPassword:function(e,t,n){return T.apply(this,arguments)},changePassword:function(e,t){return U.apply(this,arguments)},getAttributes:I,setAttribute:_};return Object(B.jsx)(D.Provider,{value:z,children:t})},K=n(555),X=n(572),H=n(556),Q=n(575),$=n(557),ee=n(554),te=n(64),ne=function(e){var t=Object(r.useState)(e),n=Object(f.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(!0),i=Object(f.a)(s,2),o=i[0],l=i[1];return Object(r.useEffect)((function(){var e=te.a().shape({password:te.b().min(8).required()});if(0!==a.length){var t=e.isValidSync({password:a});l(t)}else l(!0)}),[a]),{password:a,setPassword:c,passwordIsValid:o}},re=function(e){var t=Object(r.useState)(e),n=Object(f.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(!0),i=Object(f.a)(s,2),o=i[0],l=i[1];return Object(r.useEffect)((function(){var e=te.a().shape({username:te.b().min(8).required()});if(0!==a.length){var t=e.isValidSync({username:a});l(t)}else l(!0)}),[a]),{username:a,setUsername:c,usernameIsValid:o}},ae=function(e){var t=Object(r.useState)(e),n=Object(f.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(!0),i=Object(f.a)(s,2),o=i[0],l=i[1];return Object(r.useEffect)((function(){var e=te.a().shape({code:te.b().min(6).required()});if(0!==a.length){var t=e.isValidSync({code:a});l(t)}else l(!0)}),[a]),{code:a,setCode:c,codeIsValid:o}},ce=n(570),se=function(e){var t=e.emailIsValid,n=e.setEmail;return Object(B.jsx)(ce.a,{fullWidth:!0,variant:"outlined",label:t?"Email":"Invalid Email",error:!t,onChange:function(e){n(e.target.value)}})},ie=function(e){var t=e.label,n=e.passwordIsValid,r=e.setPassword;return Object(B.jsx)(ce.a,{fullWidth:!0,variant:"outlined",label:n?t:"Minimum 8 characters",error:!n,onChange:function(e){r(e.target.value)}})},oe=function(e){var t=e.usernameIsValid,n=e.setUsername;return Object(B.jsx)(ce.a,{fullWidth:!0,variant:"outlined",label:t?"Username":"Minimum 8 characters",error:!t,onChange:function(e){n(e.target.value)}})},le=function(e){var t=e.codeIsValid,n=e.setCode;return Object(B.jsx)(ce.a,{fullWidth:!0,variant:"outlined",label:t?"Code":"Minimum 6 characters",error:!t,onChange:function(e){n(e.target.value)}})},ue=Object(K.a)({root:{height:"100vh"},hover:{"&:hover":{cursor:"pointer"}}}),je=function(){var e=ue(),t=re(""),n=t.username,a=t.setUsername,c=t.usernameIsValid,s=ne(""),i=s.password,l=s.setPassword,u=s.passwordIsValid,j=Object(r.useState)(""),d=Object(f.a)(j,2),h=d[0],O=d[1],x=!c||0===n.length||!u||0===i.length,g=Object(o.f)(),m=Object(r.useContext)(D),v=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.signInWithEmail(n,i);case 3:g.push("home"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),"UserNotConfirmedException"===e.t0.code?g.push("verify"):O(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.push("requestcode");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(B.jsx)(H.a,{className:e.root,container:!0,direction:"row",justify:"center",alignItems:"center",children:Object(B.jsx)(H.a,{xs:11,sm:6,lg:4,container:!0,direction:"row",justify:"center",alignItems:"center",item:!0,children:Object(B.jsx)(ee.a,{style:{width:"100%",padding:32},children:Object(B.jsxs)(H.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(B.jsx)(X.a,{m:2,children:Object(B.jsx)($.a,{variant:"h3",children:"Sign in"})}),Object(B.jsxs)(X.a,{width:"80%",m:1,children:[Object(B.jsx)(oe,{usernameIsValid:c,setUsername:a})," "]}),Object(B.jsxs)(X.a,{width:"80%",m:1,children:[Object(B.jsx)(ie,{label:"Password",passwordIsValid:u,setPassword:l}),Object(B.jsx)(H.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:Object(B.jsx)(X.a,{onClick:w,mt:2,children:Object(B.jsx)($.a,{className:e.hover,variant:"body2",children:"Forgot Password?"})})})]}),Object(B.jsx)(X.a,{mt:2,children:Object(B.jsx)($.a,{color:"error",variant:"body2",children:h})}),Object(B.jsx)(X.a,{mt:2,children:Object(B.jsxs)(H.a,{container:!0,direction:"row",justify:"center",children:[Object(B.jsx)(X.a,{m:1,children:Object(B.jsx)(Q.a,{color:"secondary",variant:"contained",onClick:function(){return g.goBack()},children:"Cancel"})}),Object(B.jsx)(X.a,{m:1,children:Object(B.jsx)(Q.a,{disabled:x,color:"primary",variant:"contained",onClick:v,children:"Sign In"})})]})}),Object(B.jsx)(X.a,{mt:2,children:Object(B.jsx)(X.a,{onClick:function(){return g.push("signup")},children:Object(B.jsx)($.a,{className:e.hover,variant:"body1",children:"Register a new account"})})})]})})})})},de=Object(K.a)({root:{height:"100vh"}}),he=function(){var e=de(),t=function(e){var t=Object(r.useState)(e),n=Object(f.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(!0),i=Object(f.a)(s,2),o=i[0],l=i[1];return Object(r.useEffect)((function(){var e=te.a().shape({email:te.b().email().required()});if(0!==a.length){var t=e.isValidSync({email:a});l(t)}else l(!0)}),[a]),{email:a,setEmail:c,emailIsValid:o}}(""),n=t.email,a=t.setEmail,c=t.emailIsValid,s=ne(""),i=s.password,l=s.setPassword,u=s.passwordIsValid,j=re(""),d=j.username,h=j.setUsername,O=j.usernameIsValid,x=Object(r.useState)(""),g=Object(f.a)(x,2),m=g[0],v=g[1],w=Object(r.useState)(!1),y=Object(f.a)(w,2),S=y[0],I=y[1],k=ne(""),C=k.password,P=k.setPassword,_=k.passwordIsValid,N=!c||0===n.length||!O||0===d.length||!u||0===i.length||!_||0===C.length,V=Object(o.f)(),F=Object(r.useContext)(D),E=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.signUpWithEmail(d,n,i);case 3:I(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),e.t0 instanceof Error&&v(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),M=Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(X.a,{width:"80%",m:1,children:Object(B.jsx)(se,{emailIsValid:c,setEmail:a})}),Object(B.jsx)(X.a,{width:"80%",m:1,children:Object(B.jsx)(oe,{usernameIsValid:O,setUsername:h})}),Object(B.jsx)(X.a,{width:"80%",m:1,children:Object(B.jsx)(ie,{label:"Password",passwordIsValid:u,setPassword:l})}),Object(B.jsx)(X.a,{width:"80%",m:1,children:Object(B.jsx)(ie,{label:"Confirm Password",passwordIsValid:_,setPassword:P})}),Object(B.jsx)(X.a,{mt:2,children:Object(B.jsx)($.a,{color:"error",variant:"body2",children:m})}),Object(B.jsx)(X.a,{mt:2,children:Object(B.jsxs)(H.a,{container:!0,direction:"row",justify:"center",children:[Object(B.jsx)(X.a,{m:1,children:Object(B.jsx)(Q.a,{onClick:function(){return V.goBack()},color:"secondary",variant:"contained",children:"Cancel"})}),Object(B.jsx)(X.a,{m:1,children:Object(B.jsx)(Q.a,{disabled:N,color:"primary",variant:"contained",onClick:E,children:"Sign Up"})})]})})]}),T=Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)($.a,{variant:"h5",children:"Created ".concat(d," account")}),Object(B.jsx)($.a,{variant:"h6",children:"Verfiy Code sent to ".concat(n)}),Object(B.jsx)(X.a,{m:4,children:Object(B.jsx)(Q.a,{onClick:function(){return V.push("/verify")},color:"primary",variant:"contained",children:"Send Code"})})]});return Object(B.jsx)(H.a,{className:e.root,container:!0,direction:"row",justify:"center",alignItems:"center",children:Object(B.jsx)(H.a,{xs:11,sm:6,lg:4,container:!0,direction:"row",justify:"center",alignItems:"center",item:!0,children:Object(B.jsx)(ee.a,{style:{width:"100%",padding:16},children:Object(B.jsxs)(H.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(B.jsx)(X.a,{m:3,children:Object(B.jsx)(H.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:Object(B.jsx)($.a,{variant:"h3",children:"Sign Up"})})}),S?T:M]})})})})},be=Object(K.a)({root:{height:"100vh"},hover:{"&:hover":{cursor:"pointer"}}}),pe=function(){var e=be(),t=re(""),n=t.username,a=t.setUsername,c=t.usernameIsValid,s=ae(""),i=s.code,l=s.setCode,u=s.codeIsValid,j=Object(r.useState)(""),d=Object(f.a)(j,2),h=d[0],O=d[1],x=!c||0===n.length||!u||0===i.length,g=Object(o.f)(),m=Object(r.useContext)(D),v=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.verifyCode(n,i);case 3:g.push("signin"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),O("Invalid Code");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.push("/resetpassword");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(B.jsx)(H.a,{className:e.root,container:!0,direction:"row",justify:"center",alignItems:"center",children:Object(B.jsx)(H.a,{xs:11,sm:6,lg:4,container:!0,direction:"row",justify:"center",alignItems:"center",item:!0,children:Object(B.jsx)(ee.a,{style:{width:"100%",padding:32},children:Object(B.jsxs)(H.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(B.jsx)(X.a,{m:2,children:Object(B.jsx)($.a,{variant:"h3",children:"Send Code"})}),Object(B.jsxs)(X.a,{width:"80%",m:1,children:[Object(B.jsx)(oe,{usernameIsValid:c,setUsername:a})," "]}),Object(B.jsxs)(X.a,{width:"80%",m:1,children:[Object(B.jsx)(le,{codeIsValid:u,setCode:l}),Object(B.jsx)(H.a,{container:!0,direction:"row",justify:"flex-start",alignItems:"center",children:Object(B.jsxs)(X.a,{onClick:w,mt:2,children:[Object(B.jsx)($.a,{className:e.hover,variant:"body2",children:"Resend Code"}),Object(B.jsx)(X.a,{mt:2,children:Object(B.jsx)($.a,{color:"error",variant:"body2",children:h})})]})})]}),Object(B.jsx)(X.a,{mt:2,children:Object(B.jsxs)(H.a,{container:!0,direction:"row",justify:"center",children:[Object(B.jsx)(X.a,{m:1,children:Object(B.jsx)(Q.a,{color:"secondary",variant:"contained",onClick:function(){return g.goBack()},children:"Cancel"})}),Object(B.jsx)(X.a,{m:1,children:Object(B.jsx)(Q.a,{disabled:x,color:"primary",variant:"contained",onClick:v,children:"Send"})})]})})]})})})})},fe=Object(K.a)({root:{height:"100vh"},hover:{"&:hover":{cursor:"pointer"}},text:{textAlign:"center"}});function Oe(){var e=fe(),t=re(""),n=t.username,a=t.setUsername,c=t.usernameIsValid,s=Object(r.useState)(""),i=Object(f.a)(s,2),l=i[0],u=i[1],j=Object(r.useState)(!1),d=Object(f.a)(j,2),h=d[0],O=d[1],x=!c||0===n.length,g=Object(o.f)(),m=Object(r.useContext)(D),v=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.sendCode(n);case 3:O(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),u("Unknown user");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),w=Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(X.a,{mt:1,children:Object(B.jsx)($.a,{className:e.text,variant:"h5",children:"Reset Code Sent to ".concat(n)})}),Object(B.jsx)(X.a,{mt:4,children:Object(B.jsx)(Q.a,{onClick:function(){return g.push("forgotpassword")},color:"primary",variant:"contained",children:"Reset Password"})})]}),y=Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(X.a,{width:"80%",m:1,children:Object(B.jsx)(oe,{usernameIsValid:c,setUsername:a})}),Object(B.jsx)(X.a,{mt:2,children:Object(B.jsx)($.a,{color:"error",variant:"body2",children:l})}),Object(B.jsx)(X.a,{mt:2,children:Object(B.jsxs)(H.a,{container:!0,direction:"row",justify:"center",children:[Object(B.jsx)(X.a,{m:1,children:Object(B.jsx)(Q.a,{color:"secondary",variant:"contained",onClick:function(){return g.goBack()},children:"Cancel"})}),Object(B.jsx)(X.a,{m:1,children:Object(B.jsx)(Q.a,{disabled:x,color:"primary",variant:"contained",onClick:v,children:"Send Code"})})]})})]});return Object(B.jsx)(H.a,{className:e.root,container:!0,direction:"row",justify:"center",alignItems:"center",children:Object(B.jsx)(H.a,{xs:11,sm:6,lg:4,container:!0,direction:"row",justify:"center",alignItems:"center",item:!0,children:Object(B.jsx)(ee.a,{style:{width:"100%",padding:32},children:Object(B.jsxs)(H.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(B.jsx)(X.a,{m:2,children:Object(B.jsx)($.a,{variant:"h3",children:"Send Reset Code"})}),h?w:y]})})})})}var xe=Object(K.a)({root:{height:"100vh"}});function ge(){var e=xe(),t=ae(""),n=t.code,a=t.setCode,c=t.codeIsValid,s=ne(""),i=s.password,l=s.setPassword,u=s.passwordIsValid,j=re(""),d=j.username,h=j.setUsername,O=j.usernameIsValid,x=Object(r.useState)(""),g=Object(f.a)(x,2),m=g[0],v=g[1],w=Object(r.useState)(!1),y=Object(f.a)(w,2),S=y[0],I=y[1],k=ne(""),C=k.password,P=k.setPassword,_=k.passwordIsValid,N=!c||0===n.length||!O||0===d.length||!u||0===i.length||!_||0===C.length,V=Object(o.f)(),F=Object(r.useContext)(D),E=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.forgotPassword(d,n,i);case 3:I(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),e.t0 instanceof Error&&v(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),M=Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(X.a,{width:"80%",m:1,children:Object(B.jsx)(le,{codeIsValid:c,setCode:a})}),Object(B.jsx)(X.a,{width:"80%",m:1,children:Object(B.jsx)(oe,{usernameIsValid:O,setUsername:h})}),Object(B.jsx)(X.a,{width:"80%",m:1,children:Object(B.jsx)(ie,{label:"Password",passwordIsValid:u,setPassword:l})}),Object(B.jsx)(X.a,{width:"80%",m:1,children:Object(B.jsx)(ie,{label:"Confirm Password",passwordIsValid:_,setPassword:P})}),Object(B.jsx)(X.a,{mt:2,children:Object(B.jsx)($.a,{color:"error",variant:"body2",children:m})}),Object(B.jsx)(X.a,{mt:2,children:Object(B.jsxs)(H.a,{container:!0,direction:"row",justify:"center",children:[Object(B.jsx)(X.a,{m:1,children:Object(B.jsx)(Q.a,{onClick:function(){return V.goBack()},color:"secondary",variant:"contained",children:"Cancel"})}),Object(B.jsx)(X.a,{m:1,children:Object(B.jsx)(Q.a,{disabled:N,color:"primary",variant:"contained",onClick:E,children:"Change Password"})})]})})]}),T=Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)($.a,{variant:"h5",children:"Password Reset"}),Object(B.jsx)(X.a,{m:4,children:Object(B.jsx)(Q.a,{onClick:function(){return V.push("/signin")},color:"primary",variant:"contained",children:"Sign In"})})]});return Object(B.jsx)(H.a,{className:e.root,container:!0,direction:"row",justify:"center",alignItems:"center",children:Object(B.jsx)(H.a,{xs:11,sm:6,lg:4,container:!0,direction:"row",justify:"center",alignItems:"center",item:!0,children:Object(B.jsx)(ee.a,{style:{width:"100%",padding:16},children:Object(B.jsxs)(H.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(B.jsx)(X.a,{m:3,children:Object(B.jsx)(H.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:Object(B.jsx)($.a,{variant:"h3",children:"Forgot Password"})})}),S?T:M]})})})})}var me=Object(K.a)({root:{height:"100vh"}});function ve(){var e=me(),t=Object(r.useState)(""),n=Object(f.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(!1),i=Object(f.a)(s,2),l=i[0],u=i[1],j=ne(""),d=j.password,h=j.setPassword,O=j.passwordIsValid,x=ne(""),g=x.password,m=x.setPassword,v=x.passwordIsValid,w=!O||0===d.length||!v||0===g.length,y=Object(o.f)(),S=Object(r.useContext)(D),I=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.changePassword(d,g);case 3:u(!0),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),c(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.signOut();case 3:y.push("/"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),e.t0 instanceof Error&&c(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),C=Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(X.a,{width:"80%",m:1,children:Object(B.jsx)(ie,{label:"Old Password",passwordIsValid:O,setPassword:h})}),Object(B.jsx)(X.a,{width:"80%",m:1,children:Object(B.jsx)(ie,{label:"Password",passwordIsValid:v,setPassword:m})}),Object(B.jsx)(X.a,{mt:2,children:Object(B.jsx)($.a,{color:"error",variant:"body2",children:a})}),Object(B.jsx)(X.a,{mt:2,children:Object(B.jsxs)(H.a,{container:!0,direction:"row",justify:"center",children:[Object(B.jsx)(X.a,{m:1,children:Object(B.jsx)(Q.a,{onClick:function(){return y.goBack()},color:"secondary",variant:"contained",children:"Cancel"})}),Object(B.jsx)(X.a,{m:1,children:Object(B.jsx)(Q.a,{disabled:w,color:"primary",variant:"contained",onClick:I,children:"Change Password"})})]})})]}),P=Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)($.a,{variant:"h5",children:"Password Changed"}),Object(B.jsx)(X.a,{m:4,children:Object(B.jsx)(Q.a,{onClick:k,color:"primary",variant:"contained",children:"Sign In"})})]});return Object(B.jsx)(H.a,{className:e.root,container:!0,direction:"row",justify:"center",alignItems:"center",children:Object(B.jsx)(H.a,{xs:11,sm:6,lg:4,container:!0,direction:"row",justify:"center",alignItems:"center",item:!0,children:Object(B.jsx)(ee.a,{style:{width:"100%",padding:16},children:Object(B.jsxs)(H.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(B.jsx)(X.a,{m:3,children:Object(B.jsx)(H.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:Object(B.jsx)($.a,{variant:"h3",children:"Change Password"})})}),l?P:C]})})})})}var we=Object(K.a)((function(e){return{root:{height:"100vh"},title:{textAlign:"center"}}})),ye=function(){var e=we(),t=Object(o.f)();return Object(B.jsx)(H.a,{container:!0,children:Object(B.jsxs)(H.a,{className:e.root,container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(B.jsx)(X.a,{m:2,children:Object(B.jsx)("img",{src:"./logomain.png",width:224,height:224,alt:"logo"})}),Object(B.jsx)(X.a,{m:2,children:Object(B.jsx)(H.a,{container:!0,direction:"row",justify:"center",alignItems:"center",children:Object(B.jsx)($.a,{className:e.title,variant:"h3",children:"Ride Share"})})}),Object(B.jsx)(X.a,{m:2,children:Object(B.jsx)(Q.a,{onClick:function(){t.push("/signin")},variant:"contained",color:"primary",children:"SIGN IN"})})]})})},Se=Object(K.a)({root:{height:"100vh"},hover:{"&:hover":{cursor:"pointer"}}});var Ie=function(){var e=Se(),t=Object(o.f)(),n=localStorage.getItem("rs_share_user"),c=Object(r.useState)("Loading"),s=Object(f.a)(c,2),i=s[0],l=s[1],u=Object(r.useState)("Loading"),j=Object(f.a)(u,2),d=j[0],h=j[1];return a.a.useEffect((function(){n=localStorage.getItem("rs_share_user"),fetch("https://ct4ocfq9d7.execute-api.us-east-1.amazonaws.com/staging_1?user_id="+n).then((function(e){return e.json()})).then((function(e){console.log(e),l("null"!==e?"Y":"N")}),(function(e){return e})),fetch("https://ct4ocfq9d7.execute-api.us-east-1.amazonaws.com/staging_1?user_id="+n).then((function(e){return e.json()})).then((function(e){h("N")}),(function(e){return e}))}),[]),"Loading"===i||"Loading"===d?Object(B.jsx)("div",{children:"Loading"}):"Y"===i?(t.push("drivera"),Object(B.jsx)("div",{children:"Driver"})):"Y"===d?Object(B.jsx)("div",{children:"Rider"}):Object(B.jsx)(H.a,{className:e.root,container:!0,direction:"row",justify:"center",alignItems:"center",children:Object(B.jsx)(H.a,{xs:11,sm:6,lg:4,container:!0,direction:"row",justify:"center",alignItems:"center",item:!0,children:Object(B.jsx)(ee.a,{style:{width:"100%",padding:32},children:Object(B.jsxs)(H.a,{container:!0,direction:"column",justify:"center",alignItems:"center",children:[Object(B.jsx)(X.a,{m:2,children:Object(B.jsx)($.a,{variant:"h3"})}),Object(B.jsx)(X.a,{width:"80%",m:1,children:Object(B.jsx)(H.a,{container:!0,direction:"row",justify:"center",children:Object(B.jsx)(X.a,{m:1,children:Object(B.jsx)(Q.a,{style:{width:"200px"},color:"secondary",variant:"contained",onClick:function(){console.log("activating"),t.push("driver")},children:"Start Ride"})})})}),Object(B.jsx)(X.a,{width:"80%",m:1,children:Object(B.jsx)(H.a,{container:!0,direction:"row",justify:"center",children:Object(B.jsx)(X.a,{m:1,children:Object(B.jsx)(Q.a,{style:{width:"200px"},color:"primary",variant:"contained",onClick:function(){console.log("activating rider"),t.push("rider")},children:"Join Ride"})})})})]})})})})},ke=n(38),Ce=n(12),Pe=n(571),_e=n(580),Ne=n(581),Ve=n(576),Fe=n(574),Ee=n(582),Me=n(583),Te=n(573),Le=n(585),Ue=n(584),Re=n(39),ze=n.n(Re),We=n(63),Ae=function(e){var t=Object(r.useState)(null),n=Object(f.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(null),i=Object(f.a)(s,2),o=i[0],l=i[1];return Object(r.useEffect)((function(){var t=e.places,n=e.travelMode,r=t.map((function(e){return{location:{lat:e.lat,lng:e.lng},stopover:!0}})),a=r.shift().location,s=r.pop().location;(new google.maps.DirectionsService).route({origin:a,destination:s,travelMode:n,waypoints:r},(function(e,t){t===google.maps.DirectionsStatus.OK?c(e):l(e)}))})),o?Object(B.jsx)("h1",{children:o}):a&&Object(B.jsx)(We.DirectionsRenderer,{directions:a})},qe=function(e){var t;return!e.from||isNaN(e.from.lat)||isNaN(e.from.lng)||!e.to||isNaN(e.to.lat)||isNaN(e.to.lng)?t=Object(We.withScriptjs)(Object(We.withGoogleMap)((function(e){return Object(B.jsx)(We.GoogleMap,{defaultCenter:e.defaultCenter,defaultZoom:12})}))):(console.log(e.to.lat),console.log(e.to.lng),t=Object(We.withScriptjs)(Object(We.withGoogleMap)((function(e){return Object(B.jsx)(We.GoogleMap,{defaultCenter:e.defaultCenter,defaultZoom:e.defaultZoom,children:Object(B.jsx)(Ae,{places:e.places,travelMode:window.google.maps.TravelMode.DRIVING})})})))),Object(B.jsx)(t,{googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyAzp0_aceOfsvY8N7SXC20N2sCK2w114Go&v=3.exp&libraries=geometry,drawing,places&sensor=true",places:[e.from,e.to],loadingElement:Object(B.jsx)("div",{style:{height:"100%"}}),containerElement:Object(B.jsx)("div",{style:{height:"80vh"}}),mapElement:Object(B.jsx)("div",{style:{height:"100vh"}}),defaultCenter:{lat:e.default.lat,lng:e.default.lng},defaultZoom:9})},Be=a.a.createContext(null);var Je=function(){var e=Object(o.f)();return Object(B.jsx)(Te.a,{style:{position:"absolute",right:20},variant:"contained",onClick:function(){window.confirm("Do you want to log out ?")&&e.push("logout")},children:"Logout"})},De=function(){var e=Object(o.f)(),t="100%",n=Object(r.useContext)(Be),a=n.setFromMap,c=n.setToMap,s=Object(r.useState)(""),i=Object(f.a)(s,2),l=i[0],u=i[1],j=Object(r.useState)({lat:null,lng:null}),d=Object(f.a)(j,2),h=d[0],O=d[1],x=Object(r.useState)(""),g=Object(f.a)(x,2),m=g[0],v=g[1],w=Object(r.useState)(""),y=Object(f.a)(w,2),S=y[0],I=y[1],k=Object(r.useState)(""),C=Object(f.a)(k,2),P=C[0],_=C[1],N=Object(r.useState)({lat:null,lng:null}),V=Object(f.a)(N,2),F=V[0],E=V[1],M=function(){var e=Object(p.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Re.geocodeByAddress)(t);case 2:return n=e.sent,e.next=5,Object(Re.getLatLng)(n[0]);case 5:r=e.sent,u(t),O(r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(p.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Re.geocodeByAddress)(t);case 2:return n=e.sent,e.next=5,Object(Re.getLatLng)(n[0]);case 5:r=e.sent,v(t),E(r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function L(){return L=Object(p.a)(b.a.mark((function t(n,r,a,c){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=localStorage.getItem("rs_share_user"),t.next=3,fetch("https://ct4ocfq9d7.execute-api.us-east-1.amazonaws.com/staging_1",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({driver_id:s,from_lat:n.lat,from_lng:n.lng,to_lat:r.lat,to_lng:r.lng,miles:c,seats:a,src:l,dst:m})});case 3:e.push("drivera");case 4:case"end":return t.stop()}}),t)}))),L.apply(this,arguments)}return Object(B.jsxs)(Pe.a,{variant:"permanent",sx:Object(Ce.a)({width:t,flexShrink:0},"& .MuiDrawer-paper",{width:t,boxSizing:"border-box"}),children:[Object(B.jsx)(_e.a,{}),Object(B.jsxs)(Ne.a,{sx:{m:2},children:[Object(B.jsx)(Ne.a,{sx:{m:2},children:Object(B.jsx)(Ve.a,{fullWidth:!0,children:Object(B.jsx)(ze.a,{value:l,onChange:u,onSelect:M,children:function(e){var t=e.getInputProps,n=e.suggestions,r=e.getSuggestionItemProps,a=e.loading;return Object(B.jsxs)(Ne.a,{children:[Object(B.jsx)(Fe.a,Object(ke.a)({autoFocus:!0,sx:{width:"100%"}},t({placeholder:"From"}))),Object(B.jsxs)(Ee.a,{dense:!0,children:[a?Object(B.jsx)(Ne.a,{children:"...loading"}):null,n.map((function(e){return Object(B.jsx)(Me.a,Object(ke.a)(Object(ke.a)({},r(e)),{},{sx:{cursor:"pointer"},children:e.description}))}))]})]})}})})}),Object(B.jsx)(Ne.a,{sx:{m:2},children:Object(B.jsx)(Ve.a,{fullWidth:!0,children:Object(B.jsx)(ze.a,{value:m,onChange:v,onSelect:T,children:function(e){var t=e.getInputProps,n=e.suggestions,r=e.getSuggestionItemProps,a=e.loading;return Object(B.jsxs)(Ne.a,{children:[Object(B.jsx)(Fe.a,Object(ke.a)({sx:{width:"100%"}},t({placeholder:"To"}))),Object(B.jsxs)(Ee.a,{dense:!0,children:[a?Object(B.jsx)(Ne.a,{children:"...loading"}):null,n.map((function(e){return Object(B.jsx)(Me.a,Object(ke.a)(Object(ke.a)({},r(e)),{},{sx:{cursor:"pointer"},children:e.description}))}))]})]})}})})}),Object(B.jsx)(Ne.a,{sx:{m:2},children:Object(B.jsx)(Ve.a,{fullWidth:!0,children:Object(B.jsx)(ze.a,{value:S,onChange:I,children:function(e){var t=e.getInputProps;return Object(B.jsx)(Ne.a,{children:Object(B.jsx)(Fe.a,Object(ke.a)({sx:{width:"100%"}},t({placeholder:"Spare Seats"})))})}})})}),Object(B.jsx)(Ne.a,{sx:{m:2},children:Object(B.jsx)(Ve.a,{fullWidth:!0,children:Object(B.jsx)(ze.a,{value:P,onChange:_,children:function(e){var t=e.getInputProps;return Object(B.jsx)(Ne.a,{children:Object(B.jsx)(Fe.a,Object(ke.a)({sx:{width:"100%"}},t({placeholder:"Max Detour (mi)"})))})}})})}),Object(B.jsx)(Ne.a,{sx:{m:2},children:Object(B.jsx)(Te.a,{variant:"contained",onClick:function(){h&&F&&S&&P&&(a(h),c(F),function(e,t,n,r){L.apply(this,arguments)}(h,F,S,P))},children:"Submit"})})]})]})},Ge=function(){var e=Object(r.useState)({lat:"",lng:""}),t=Object(f.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)({lat:"",lng:""}),i=Object(f.a)(s,2),o=i[0],l=i[1],u=Object(r.useState)({lat:0,lng:0}),j=Object(f.a)(u,2),d=j[0],h=j[1];return a.a.useEffect((function(){navigator.geolocation.getCurrentPosition((function(e){h({lat:e.coords.latitude,lng:e.coords.longitude})}))}),[]),Object(B.jsx)(Be.Provider,{value:{fromMap:n,setFromMap:c,toMap:o,setToMap:l,defaultMap:d},children:Object(B.jsxs)(Ne.a,{sx:{display:"flex"},children:[Object(B.jsx)(Le.a,{position:"fixed",sx:{zIndex:function(e){return e.zIndex.drawer+1}},children:Object(B.jsxs)(_e.a,{children:[Object(B.jsx)(Ue.a,{variant:"h6",noWrap:!0,component:"div",children:"RideShare"}),Object(B.jsx)(Je,{})]})}),Object(B.jsx)(De,{})]})})},Ye=function(){var e=localStorage.getItem("rs_share_user"),t=(Object(o.f)(),Object(r.useContext)(Be)),n=t.setFromMap,c=t.setToMap,s=Object(r.useContext)(Be).setRideFlag,i=Object(r.useContext)(Be),l=i.riderName,u=i.setRiderName,j=Object(r.useState)(null),d=Object(f.a)(j,2),h=d[0],O=d[1],x=Object(r.useState)(null),g=Object(f.a)(x,2),m=g[0],v=g[1];function w(e,t,n,r,a,c){return y.apply(this,arguments)}function y(){return(y=Object(p.a)(b.a.mark((function e(t,n,r,a,c,s){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://ct4ocfq9d7.execute-api.us-east-1.amazonaws.com/staging_1/pickup/accept",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({pickup_id:n,driver_id:r,driver_ride_id:a,rider_id:c,rider_ride_id:s,status:t})});case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a.a.useLayoutEffect((function(){fetch("https://ct4ocfq9d7.execute-api.us-east-1.amazonaws.com/staging_1?user_id="+e).then((function(e){return e.json()})).then((function(e){var t=JSON.parse(e);if(console.log(t),t&&"null"!==t)n({lat:Number(t[6]),lng:Number(t[7])});else;})).then((function(e){return e}))}),[]),a.a.useLayoutEffect((function(){fetch("https://ct4ocfq9d7.execute-api.us-east-1.amazonaws.com/staging_1/current?user_id="+e).then((function(e){return e.json()})).then((function(e){var t=JSON.parse(e);console.log("------"),console.log(t),t&&"null"!==t&&(c({lat:Number(t[5]),lng:Number(t[6])}),"A"===t[7]&&(s("End Ride"),u("Completing Trip")),"B"===t[7]&&(s("Rider Picked Up?"),u("Picking Up: "+t[4]+" | From: "+t[9])),"C"===t[7]&&(s("Rider Dropped?"),u("Dropping: "+t[4]+" | At: "+t[9])))})).then((function(e){return e}))}),[]),a.a.useLayoutEffect((function(){var t=setInterval((function(){fetch("https://ct4ocfq9d7.execute-api.us-east-1.amazonaws.com/staging_1?user_id="+e).then((function(e){return e.json()})).then((function(e){var t=JSON.parse(e);if(t&&"null"!==t)n({lat:Number(t[6]),lng:Number(t[7])});else;})).then((function(e){return e}))}),5e3);return function(){return clearInterval(t)}}),[]),a.a.useLayoutEffect((function(){var t=setInterval((function(){navigator.geolocation.getCurrentPosition((function(t){fetch("https://ct4ocfq9d7.execute-api.us-east-1.amazonaws.com/staging_1/driver/update",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({driver_id:e,lat:t.coords.latitude,lng:t.coords.longitude})})}))}),1e3);return function(){return clearInterval(t)}}),[]),a.a.useLayoutEffect((function(){v(h?Object(B.jsxs)(Ne.a,{sx:{m:2},style:{position:"fixed",width:"70%",height:"25%",left:"15%",top:"37.5%",margin:"0px","background-color":"white"},children:[Object(B.jsx)(Ne.a,{sx:{m:2},style:{position:"fixed",width:"35%",height:"7.5%",left:"15%",top:"55%",margin:"0px","background-color":"rgb(197 103 103)",display:"flex","flex-grow":1},children:Object(B.jsx)(Te.a,{variant:"contained",style:{"background-color":"rgb(197 103 103)",width:"100vw"},onClick:function(){w("rejected",h[0],h[1],h[2],h[3],h[4]),console.log("rejected")},children:Object(B.jsx)(Ue.a,{variant:"h7",noWrap:!0,component:"div",children:"Reject"})})}),Object(B.jsx)(Ne.a,{sx:{m:2},style:{position:"fixed",width:"35%",height:"7.5%",right:"15%",top:"55%",margin:"0px","background-color":"#5e955e",display:"flex","flex-grow":1},children:Object(B.jsx)(Te.a,{variant:"contained",style:{"background-color":"#5e955e",width:"100vw"},onClick:function(){w("accepted",h[0],h[1],h[2],h[3],h[4]),console.log("acceptedd")},children:Object(B.jsx)(Ue.a,{variant:"h7",noWrap:!0,component:"div",children:"Accept"})})}),Object(B.jsxs)(Ue.a,{variant:"h7",component:"div",style:{"text-align":"center","vertical-align":"middle"},children:[Object(B.jsx)("br",{}),"Pickup Point: ",h[7]," ",Object(B.jsx)("br",{})," Drop Point: ",h[8]]})]}):Object(B.jsx)(B.Fragment,{}))}),[h]),a.a.useLayoutEffect((function(){var t=setInterval((function(){fetch("https://ct4ocfq9d7.execute-api.us-east-1.amazonaws.com/staging_1/pickup?user_id="+e).then((function(e){return e.json()})).then((function(e){var t=JSON.parse(e);O(t)})).then((function(e){return e}))}),2e3);return function(){return clearInterval(t)}}),[]),Object(B.jsxs)("div",{style:{zIndex:1e4,position:"absolute",top:"60px",width:"100%",height:"8%","background-color":"white",display:"flex","justify-content":"center","align-items":"center","border-bottom":"2px solid rgb(94, 149, 94)"},children:[Object(B.jsxs)("div",{style:{"text-align":"center","vertical-align":"middle"},children:[l," "]}),m]})},Ze=function(){var e=Object(r.useContext)(Be),t=e.fromMap,n=e.toMap,a=e.defaultMap;return Object(B.jsx)(Ne.a,{component:"main",sx:{flexGrow:1},children:Object(B.jsx)(qe,{to:{lat:n.lat,lng:n.lng},from:{lat:t.lat,lng:t.lng},default:{lat:a.lat,lng:a.lng}})})},Ke=function(){var e=Object(o.f)(),t=Object(r.useState)({lat:"",lng:""}),n=Object(f.a)(t,2),c=n[0],s=n[1],i=Object(r.useState)({lat:"",lng:""}),l=Object(f.a)(i,2),u=l[0],j=l[1],d=Object(r.useState)({lat:0,lng:0}),h=Object(f.a)(d,2),O=h[0],x=h[1],g=Object(r.useState)(""),m=Object(f.a)(g,2),v=m[0],w=m[1],y=Object(r.useState)(""),S=Object(f.a)(y,2),I=S[0],k=S[1];function C(){return(C=Object(p.a)(b.a.mark((function t(){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=localStorage.getItem("rs_share_user"),r=v,t.next=4,fetch("https://ct4ocfq9d7.execute-api.us-east-1.amazonaws.com/staging_1/routes/delete/top",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({driver_id:n})});case 4:"End Ride"===r?e.push("home"):window.location.reload();case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return a.a.useEffect((function(){navigator.geolocation.getCurrentPosition((function(e){x({lat:e.coords.latitude,lng:e.coords.longitude})}))}),[]),Object(B.jsx)(Be.Provider,{value:{fromMap:c,setFromMap:s,toMap:u,setToMap:j,defaultMap:O,rideFlag:v,setRideFlag:w,riderName:I,setRiderName:k},children:Object(B.jsxs)(Ne.a,{sx:{display:"flex"},children:[Object(B.jsx)(Le.a,{position:"fixed",sx:{zIndex:function(e){return e.zIndex.drawer+1},height:"60px"},children:Object(B.jsxs)(_e.a,{children:[Object(B.jsx)(Ue.a,{variant:"h6",noWrap:!0,component:"div",children:"RideShare"}),Object(B.jsx)(Je,{})]})}),Object(B.jsx)(Ye,{}),Object(B.jsx)(Ze,{}),Object(B.jsx)(Ne.a,{sx:{flexGrow:1,zIndex:1e5},style:{position:"absolute",bottom:0,width:"100vw",height:"10%","background-color":"gray",display:"flex","justify-content":"center"},children:Object(B.jsx)(Te.a,{style:{padding:"0 5% 0 5%"},variant:"contained",onClick:function(){!function(){C.apply(this,arguments)}()},children:Object(B.jsx)(Ue.a,{variant:"h6",noWrap:!0,component:"div",children:v})})})]})})},Xe=(Object(K.a)({root:{height:"100vh"},hover:{"&:hover":{cursor:"pointer"}}}),function(){var e=Object(o.f)(),t=Object(r.useContext)(D);return Object(r.useEffect)((function(){function n(){return(n=Object(p.a)(b.a.mark((function n(){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.signOut();case 2:e.push("landing");case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[]),Object(B.jsx)("div",{})}),He=function(){var e=Object(o.f)(),t="100%",n=Object(r.useContext)(Be),c=n.setFromMap,s=n.setToMap,i=Object(r.useState)(""),l=Object(f.a)(i,2),u=l[0],j=l[1],d=Object(r.useState)({lat:null,lng:null}),h=Object(f.a)(d,2),O=h[0],x=h[1],g=Object(r.useState)(""),m=Object(f.a)(g,2),v=m[0],w=m[1],y=Object(r.useState)(!1),S=Object(f.a)(y,2),I=S[0],k=S[1],C=Object(r.useState)(null),P=Object(f.a)(C,2),_=P[0],N=P[1],V=Object(r.useState)({lat:null,lng:null}),F=Object(f.a)(V,2),E=F[0],M=F[1],T=function(){var e=Object(p.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Re.geocodeByAddress)(t);case 2:return n=e.sent,e.next=5,Object(Re.getLatLng)(n[0]);case 5:r=e.sent,j(t),x(r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(p.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Re.geocodeByAddress)(t);case 2:return n=e.sent,e.next=5,Object(Re.getLatLng)(n[0]);case 5:r=e.sent,w(t),M(r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function U(){return(U=Object(p.a)(b.a.mark((function t(n,r,a,c){var s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=localStorage.getItem("rs_share_user"),t.next=3,fetch("https://ct4ocfq9d7.execute-api.us-east-1.amazonaws.com/staging_1/rides/start",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({rider_id:s,from_lat:n.lat,from_lng:n.lng,to_lat:r.lat,to_lng:r.lng,src:u,dst:v})}).then((function(e){return e.json()})).then((function(t){"rejected"===t?k(!0):e.push("ridera")})).then((function(e){return e}));case 3:t.sent;case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return a.a.useLayoutEffect((function(){N(I?Object(B.jsxs)(Ne.a,{sx:{m:2},style:{position:"fixed",width:"70%",height:"10%",left:"15%",top:"37.5%",margin:"0px","background-color":"grey"},children:[Object(B.jsx)(Ne.a,{sx:{m:2},style:{position:"fixed",width:"70%",height:"7.5%",left:"15%",top:"45%",margin:"0px","background-color":"#5e955e",display:"flex","flex-grow":1},children:Object(B.jsx)(Te.a,{variant:"contained",style:{"background-color":"#5e955e",width:"100vw"},onClick:function(){k(!1)},children:Object(B.jsx)(Ue.a,{variant:"h7",noWrap:!0,component:"div",children:"OK"})})}),Object(B.jsxs)(Ue.a,{variant:"h7",component:"div",style:{"text-align":"center","vertical-align":"middle",color:"white"},children:[Object(B.jsx)("br",{}),"No ride found. Try again later"]})]}):Object(B.jsx)(B.Fragment,{}))}),[I]),Object(B.jsxs)(Pe.a,{variant:"permanent",sx:Object(Ce.a)({width:t,flexShrink:0},"& .MuiDrawer-paper",{width:t,boxSizing:"border-box"}),children:[Object(B.jsx)(_e.a,{}),Object(B.jsxs)(Ne.a,{sx:{m:2},children:[Object(B.jsx)(Ne.a,{sx:{m:2},children:Object(B.jsx)(Ve.a,{fullWidth:!0,children:Object(B.jsx)(ze.a,{value:u,onChange:j,onSelect:T,children:function(e){var t=e.getInputProps,n=e.suggestions,r=e.getSuggestionItemProps,a=e.loading;return Object(B.jsxs)(Ne.a,{children:[Object(B.jsx)(Fe.a,Object(ke.a)({autoFocus:!0,sx:{width:"100%"}},t({placeholder:"From"}))),Object(B.jsxs)(Ee.a,{dense:!0,children:[a?Object(B.jsx)(Ne.a,{children:"...loading"}):null,n.map((function(e){return Object(B.jsx)(Me.a,Object(ke.a)(Object(ke.a)({},r(e)),{},{sx:{cursor:"pointer"},children:e.description}))}))]})]})}})})}),Object(B.jsx)(Ne.a,{sx:{m:2},children:Object(B.jsx)(Ve.a,{fullWidth:!0,children:Object(B.jsx)(ze.a,{value:v,onChange:w,onSelect:L,children:function(e){var t=e.getInputProps,n=e.suggestions,r=e.getSuggestionItemProps,a=e.loading;return Object(B.jsxs)(Ne.a,{children:[Object(B.jsx)(Fe.a,Object(ke.a)({sx:{width:"100%"}},t({placeholder:"To"}))),Object(B.jsxs)(Ee.a,{dense:!0,children:[a?Object(B.jsx)(Ne.a,{children:"...loading"}):null,n.map((function(e){return Object(B.jsx)(Me.a,Object(ke.a)(Object(ke.a)({},r(e)),{},{sx:{cursor:"pointer"},children:e.description}))}))]})]})}})})}),Object(B.jsx)(Ne.a,{sx:{m:2},children:Object(B.jsx)(Te.a,{variant:"contained",onClick:function(){O&&E&&(c(O),s(E),function(e,t,n,r){U.apply(this,arguments)}(O,E))},children:"Submit"})}),_]})]})},Qe=function(){var e=Object(r.useState)({lat:"",lng:""}),t=Object(f.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)({lat:"",lng:""}),s=Object(f.a)(c,2),i=s[0],o=s[1];return Object(B.jsx)(Be.Provider,{value:{fromMap:n,setFromMap:a,toMap:i,setToMap:o},children:Object(B.jsxs)(Ne.a,{sx:{display:"flex"},children:[Object(B.jsx)(Le.a,{position:"fixed",sx:{zIndex:function(e){return e.zIndex.drawer+1}},children:Object(B.jsxs)(_e.a,{children:[Object(B.jsx)(Ue.a,{variant:"h6",noWrap:!0,component:"div",children:"RideShare"}),Object(B.jsx)(Je,{})]})}),Object(B.jsx)(He,{})]})})},$e=function(){var e=Object(r.useContext)(Be),t=e.from,n=e.to,a=e.base;return Object(B.jsx)(Ne.a,{component:"main",sx:{flexGrow:1},children:Object(B.jsx)(qe,{to:{lat:parseFloat(n.lat),lng:parseFloat(n.lng)},from:{lat:parseFloat(t.lat),lng:parseFloat(t.lng)},default:{lat:a.lat,lng:a.lng}})})},et=function(){var e=localStorage.getItem("rs_share_user"),t=Object(o.f)(),n=Object(r.useContext)(Be),c=(n.from,n.setFrom),s=Object(r.useContext)(Be),i=(s.to,s.setTo),l=Object(r.useContext)(Be),u=(l.base,l.setBase),j=Object(r.useState)(""),d=Object(f.a)(j,2),h=d[0],b=d[1],p=Object(r.useState)(""),O=Object(f.a)(p,2),x=O[0],g=O[1],m=Object(r.useState)(null),v=Object(f.a)(m,2),w=v[0],y=v[1],S=Object(r.useState)(null),I=Object(f.a)(S,2),k=(I[0],I[1],Object(r.useState)("")),C=Object(f.a)(k,2),P=(C[0],C[1],Object(r.useState)("")),_=Object(f.a)(P,2);_[0],_[1];function N(){fetch("https://ct4ocfq9d7.execute-api.us-east-1.amazonaws.com/staging_1/rides/fetch?user_id="+e).then((function(e){return e.json()})).then((function(e){var n=JSON.parse(e);y(n),n&&"null"!==n?b(n[4]):(b("redirecting"),t.push("rider"))})).then((function(e){return e}))}return a.a.useLayoutEffect((function(){N()}),[]),a.a.useLayoutEffect((function(){var e=setInterval((function(){N()}),3e3);return function(){return clearInterval(e)}}),[]),a.a.useLayoutEffect((function(){console.log(w),console.log(h);var e=setInterval((function(){"requested"===h?(u({lat:parseInt(w[0]),lng:parseInt(w[1])}),c({lat:"",lng:""}),i({lat:"",lng:""})):"assigned"===h?(c({lat:w[15],lng:w[16]}),i({lat:w[0],lng:w[1]})):"active"===h&&(c({lat:w[15],lng:w[16]}),i({lat:w[2],lng:w[3]}))}),1e4);return function(){return clearInterval(e)}}),[]),a.a.useLayoutEffect((function(){"requested"===h?(u({lat:parseFloat(w[0]),lng:parseFloat(w[1])}),c({lat:"",lng:""}),i({lat:"",lng:""}),g("Looking for a driver")):"assigned"===h?(u({lat:parseFloat(w[15]),lng:parseFloat(w[16])}),c({lat:w[15],lng:w[16]}),i({lat:w[0],lng:w[1]}),g(w[10]+" is arriving")):"active"===h&&(u({lat:parseFloat(w[15]),lng:parseFloat(w[16])}),c({lat:w[15],lng:w[16]}),i({lat:w[2],lng:w[3]}),g("Ride in Progress"))}),[h]),Object(B.jsx)(Ne.a,{sx:{flexGrow:1,zIndex:1e5,position:"absolute",bottom:0,width:"100vw",height:"10%",backgroundColor:"#1976d2",display:"flex",justifyContent:"center"},children:Object(B.jsx)(Te.a,{sx:{width:"100%"},variant:"contained",children:Object(B.jsx)(Ue.a,{variant:"h7",noWrap:!0,component:"div",children:x})})})},tt=function(){var e=Object(r.useState)({lat:"",lng:""}),t=Object(f.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)({lat:"",lng:""}),s=Object(f.a)(c,2),i=s[0],o=s[1],l=Object(r.useState)({lat:0,lng:0}),u=Object(f.a)(l,2),j=u[0],d=u[1];return Object(B.jsx)(Be.Provider,{value:{from:n,setFrom:a,to:i,setTo:o,base:j,setBase:d},children:Object(B.jsxs)(Ne.a,{sx:{display:"flex"},children:[Object(B.jsx)(Le.a,{position:"fixed",sx:{zIndex:function(e){return e.zIndex.drawer+1},height:"60px"},children:Object(B.jsxs)(_e.a,{children:[Object(B.jsx)(Ue.a,{variant:"h6",noWrap:!0,component:"div",children:"RideShare"}),Object(B.jsx)(Je,{})]})}),Object(B.jsx)("div",{sx:{zIndex:1e4,position:"absolute",top:"60px",width:"100%",height:"8%",backgroundColor:"white",display:"flex",justifyContent:"center",alignItems:"center",borderBottom:"2px solid rgb(94, 149, 94)"},children:Object(B.jsx)("div",{sx:{textAlign:"center",verticalAlign:"middle"},children:" "})}),Object(B.jsx)($e,{}),Object(B.jsx)(et,{})]})})},nt=Object(l.a)({palette:{type:"light"}});nt=Object(u.a)(nt);var rt=function(){return Object(B.jsx)(i.a,{children:Object(B.jsxs)(o.c,{children:[Object(B.jsx)(o.a,{path:"/signin",component:je}),Object(B.jsx)(o.a,{path:"/signup",component:he}),Object(B.jsx)(o.a,{path:"/verify",component:pe}),Object(B.jsx)(o.a,{path:"/requestcode",component:Oe}),Object(B.jsx)(o.a,{path:"/forgotpassword",component:ge}),Object(B.jsx)(o.a,{path:"/landing",component:ye}),Object(B.jsx)(o.a,{path:"/",component:ye})]})})},at=function(){return Object(B.jsx)(i.a,{children:Object(B.jsxs)(o.c,{children:[Object(B.jsx)(o.a,{path:"/changepassword",component:ve}),Object(B.jsx)(o.a,{path:"/logout",component:Xe}),Object(B.jsx)(o.a,{path:"/driver",component:Ge}),Object(B.jsx)(o.a,{path:"/drivera",component:Ke}),Object(B.jsx)(o.a,{path:"/rider",component:Qe}),Object(B.jsx)(o.a,{path:"/ridera",component:tt}),Object(B.jsx)(o.a,{path:"/home",component:Ie}),Object(B.jsx)(o.a,{path:"/",component:Ie})]})})},ct=function(){return Object(B.jsxs)(j.a,{theme:nt,children:[Object(B.jsx)(d.a,{}),Object(B.jsxs)(Z,{children:[Object(B.jsx)(G,{children:Object(B.jsx)(at,{})}),Object(B.jsx)(Y,{children:Object(B.jsx)(rt,{})})]})]})};s.a.render(Object(B.jsx)(a.a.StrictMode,{children:Object(B.jsx)(ct,{})}),document.getElementById("root"))}},[[505,1,2]]]);
//# sourceMappingURL=main.b52bad7d.chunk.js.map